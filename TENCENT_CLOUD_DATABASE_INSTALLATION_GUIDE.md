# è…¾è®¯äº‘æ•°æ®åº“å®‰è£…æŒ‡å—

**åˆ›å»ºæ—¶é—´**: 2025å¹´1æœˆ28æ—¥  
**ç‰ˆæœ¬**: v3.0  
**ç›®æ ‡**: æ ¹æ®æ•°æ®åº“å‘½åè§„èŒƒè®¡åˆ’ï¼Œåœ¨è…¾è®¯äº‘æœåŠ¡å™¨ä¸Šå®‰è£…æ‰€éœ€çš„å„ç±»æ•°æ®åº“  
**çŠ¶æ€**: âœ… å®‰è£…æŒ‡å—åˆ¶å®šå®Œæˆï¼ŒFutureç‰ˆå·²æˆåŠŸéƒ¨ç½²ï¼Œç‰ˆæœ¬åˆ‡æ¢æ¨¡å¼å·²å®žçŽ°  
**æœ€åŽæ›´æ–°**: 2025å¹´10æœˆ4æ—¥ - åŸºäºŽå®žé™…éƒ¨ç½²ç»éªŒæ›´æ–°ï¼Œé‡‡ç”¨ç‰ˆæœ¬åˆ‡æ¢æ¨¡å¼

---

## ðŸš€ å¿«é€Ÿå¼€å§‹

### **æž¶æž„è®¾è®¡ï¼šç‰ˆæœ¬åˆ‡æ¢æ¨¡å¼**
- ðŸ”„ **ç‰ˆæœ¬åˆ‡æ¢**: åŒä¸€æ—¶é—´åªè¿è¡Œä¸€ä¸ªç‰ˆæœ¬çš„æ•°æ®åº“
- ðŸ”„ **èµ„æºä¼˜åŒ–**: é¿å…å¤šç‰ˆæœ¬åŒæ—¶è¿è¡Œå¯¼è‡´çš„èµ„æºå†²çª
- ðŸ”„ **ç®¡ç†ç®€åŒ–**: é€šè¿‡è„šæœ¬å¿«é€Ÿåˆ‡æ¢ç‰ˆæœ¬

### **å·²å®Œæˆçš„éƒ¨ç½²**
- âœ… **Futureç‰ˆæ•°æ®åº“**: 11ä¸ªæ•°æ®åº“æœåŠ¡å·²éƒ¨ç½²å¹¶è¿è¡Œ
- âœ… **é˜²ç«å¢™é…ç½®**: Futureç‰ˆç«¯å£å·²å¼€æ”¾ï¼Œå¤–éƒ¨è®¿é—®æ­£å¸¸
- âœ… **å¤–éƒ¨è®¿é—®æµ‹è¯•**: æ‰€æœ‰æœåŠ¡å¤–éƒ¨è®¿é—®éªŒè¯æˆåŠŸ

### **ä¸‹ä¸€æ­¥è®¡åˆ’**
- ðŸ”„ **ç‰ˆæœ¬åˆ‡æ¢è„šæœ¬**: åˆ›å»ºç‰ˆæœ¬åˆ‡æ¢ç®¡ç†è„šæœ¬
- ðŸ”„ **DAOç‰ˆæ•°æ®åº“**: å‡†å¤‡DAOç‰ˆæ•°æ®åº“æœåŠ¡
- ðŸ”„ **åŒºå—é“¾ç‰ˆæ•°æ®åº“**: å‡†å¤‡åŒºå—é“¾ç‰ˆæ•°æ®åº“æœåŠ¡

### **å½“å‰çŠ¶æ€**
- **æœåŠ¡å™¨IP**: 101.33.251.158
- **å½“å‰ç‰ˆæœ¬**: Futureç‰ˆ (è¿è¡Œä¸­)
- **é˜²ç«å¢™çŠ¶æ€**: âœ… å·²é…ç½®ï¼ŒFutureç‰ˆç«¯å£å·²å¼€æ”¾
- **è®¿é—®æ–‡æ¡£**: `/opt/jobfirst-multi-version/future/EXTERNAL_ACCESS_INFO.md`

---

## ðŸŽ¯ å®‰è£…ç›®æ ‡

æ ¹æ® `DATABASE_NAMING_CONVENTION_PLAN.md` çš„è§„èŒƒï¼Œåœ¨è…¾è®¯äº‘æœåŠ¡å™¨ä¸Šå®‰è£…ä»¥ä¸‹æ•°æ®åº“ï¼š

### **Futureç‰ˆæ•°æ®åº“ (ç«¯å£æ®µ: 3000-3999)**
- MySQL: 3306
- PostgreSQL: 5432  
- Redis: 6379
- Neo4j: 7474/7687
- MongoDB: 27017
- Elasticsearch: 9200
- Weaviate: 8082
- AIæœåŠ¡æ•°æ®åº“: 5435
- DAOç³»ç»Ÿæ•°æ®åº“: 9506
- ä¼ä¸šä¿¡ç”¨æ•°æ®åº“: 7534

### **DAOç‰ˆæ•°æ®åº“ (ç«¯å£æ®µ: 4000-4999)**
- MySQL: 3307
- PostgreSQL: 5433
- Redis: 6380
- Neo4j: 7475/7688
- MongoDB: 27018
- Elasticsearch: 9201
- Weaviate: 8083
- AIæœåŠ¡æ•°æ®åº“: 5436
- DAOç³»ç»Ÿæ•°æ®åº“: 9507
- ä¼ä¸šä¿¡ç”¨æ•°æ®åº“: 7535

### **åŒºå—é“¾ç‰ˆæ•°æ®åº“ (ç«¯å£æ®µ: 5000-5999)**
- MySQL: 3308
- PostgreSQL: 5434
- Redis: 6381
- Neo4j: 7476/7689
- MongoDB: 27019
- Elasticsearch: 9202
- Weaviate: 8084
- AIæœåŠ¡æ•°æ®åº“: 5437
- DAOç³»ç»Ÿæ•°æ®åº“: 9508
- ä¼ä¸šä¿¡ç”¨æ•°æ®åº“: 7536

---

## ðŸ”§ çŽ¯å¢ƒå‡†å¤‡

### **ç³»ç»Ÿå…¼å®¹æ€§ç¡®è®¤**

**ç›®æ ‡ç³»ç»Ÿ**: Ubuntu 22.04 LTS (Jammy Jellyfish)  
**æž¶æž„**: x86_64 (AMD64)  
**å†…æ ¸ç‰ˆæœ¬**: 5.15.0+  

### **æ•°æ®åº“ç‰ˆæœ¬å…¼å®¹æ€§è¡¨**

| æ•°æ®åº“ | ç‰ˆæœ¬ | Ubuntu 22.04å…¼å®¹æ€§ | Javaè¦æ±‚ | å†…å­˜è¦æ±‚ | å¤‡æ³¨ |
|--------|------|-------------------|----------|----------|------|
| **MySQL** | 8.0.35 | âœ… å®Œå…¨å…¼å®¹ | æ—  | 512MB+ | æœ€æ–°ç¨³å®šç‰ˆ |
| **PostgreSQL** | 15.5 | âœ… å®Œå…¨å…¼å®¹ | æ—  | 512MB+ | LTSç‰ˆæœ¬ |
| **Redis** | 7.2-alpine | âœ… å®Œå…¨å…¼å®¹ | æ—  | 256MB+ | è½»é‡çº§ |
| **Neo4j** | 5.15.0 | âœ… å®Œå…¨å…¼å®¹ | Java 21 | 1GB+ | éœ€è¦Java 21 |
| **MongoDB** | 7.0.4 | âœ… å®Œå…¨å…¼å®¹ | æ—  | 512MB+ | æœ€æ–°ç¨³å®šç‰ˆ |
| **Elasticsearch** | 8.11.1 | âœ… å®Œå…¨å…¼å®¹ | Java 21 | 1GB+ | éœ€è¦Java 21 |
| **Weaviate** | 1.21.5 | âœ… å®Œå…¨å…¼å®¹ | æ—  | 512MB+ | å‘é‡æ•°æ®åº“ |

### **ç‰ˆæœ¬éªŒè¯æ­¥éª¤**

```bash
# éªŒè¯ç³»ç»Ÿç‰ˆæœ¬
lsb_release -a
uname -a

# éªŒè¯Javaç‰ˆæœ¬ (Neo4jå’ŒElasticsearchéœ€è¦)
java -version
echo $JAVA_HOME

# éªŒè¯Dockerç‰ˆæœ¬
docker --version
docker-compose --version

# éªŒè¯Node.jsç‰ˆæœ¬ (Weaviateéœ€è¦)
node --version
npm --version
```

### **ç¬¬ä¸€æ­¥ï¼šå®‰è£…Dockerå’ŒDocker Compose**

#### **æ–¹æ³•ä¸€ï¼šUbuntuå®˜æ–¹ä»“åº“å®‰è£… (æŽ¨èï¼Œç½‘ç»œç¨³å®š)**

```bash
# 1. æ›´æ–°ç³»ç»ŸåŒ…
sudo apt update && sudo apt upgrade -y

# 2. å®‰è£…å¿…è¦çš„ä¾èµ–
sudo apt install -y apt-transport-https ca-certificates curl gnupg lsb-release

# 3. ä½¿ç”¨Ubuntuå®˜æ–¹ä»“åº“å®‰è£…Docker (ç½‘ç»œæ›´ç¨³å®š)
sudo apt install -y docker.io docker-compose

# 4. å¯åŠ¨DockeræœåŠ¡
sudo systemctl start docker
sudo systemctl enable docker

# 5. å°†ubuntuç”¨æˆ·æ·»åŠ åˆ°dockerç»„
sudo usermod -aG docker ubuntu

# 6. é…ç½®è…¾è®¯äº‘é•œåƒæº (è§£å†³ç½‘ç»œé—®é¢˜)
sudo mkdir -p /etc/docker
sudo tee /etc/docker/daemon.json > /dev/null << 'EOF'
{
  "registry-mirrors": [
    "https://mirror.ccs.tencentyun.com",
    "https://docker.mirrors.ustc.edu.cn",
    "https://hub-mirror.c.163.com"
  ]
}
EOF

# 7. é‡å¯DockeræœåŠ¡
sudo systemctl restart docker

# 8. éªŒè¯å®‰è£…
docker --version
docker-compose --version
```

#### **æ–¹æ³•äºŒï¼šDockerå®˜æ–¹ä»“åº“å®‰è£… (ç½‘ç»œè‰¯å¥½æ—¶)**

```bash
# 1. æ›´æ–°ç³»ç»ŸåŒ…
sudo apt update && sudo apt upgrade -y

# 2. å®‰è£…å¿…è¦çš„ä¾èµ–
sudo apt install -y apt-transport-https ca-certificates curl gnupg lsb-release

# 3. æ·»åŠ Dockerå®˜æ–¹GPGå¯†é’¥
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg

# 4. æ·»åŠ Dockerä»“åº“
echo "deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null

# 5. å®‰è£…Docker
sudo apt update
sudo apt install -y docker-ce docker-ce-cli containerd.io

# 6. å¯åŠ¨DockeræœåŠ¡
sudo systemctl start docker
sudo systemctl enable docker

# 7. å°†ubuntuç”¨æˆ·æ·»åŠ åˆ°dockerç»„
sudo usermod -aG docker ubuntu

# 8. å®‰è£…Docker Compose
sudo curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose

# 9. éªŒè¯å®‰è£…
docker --version
docker-compose --version
```

#### **æ–¹æ³•ä¸‰ï¼šç¦»çº¿å®‰è£… (ç½‘ç»œé—®é¢˜æ—¶çš„è§£å†³æ–¹æ¡ˆ)**

```bash
# 1. æ›´æ–°ç³»ç»ŸåŒ…
sudo apt update && sudo apt upgrade -y

# 2. å®‰è£…å¿…è¦çš„ä¾èµ–
sudo apt install -y apt-transport-https ca-certificates curl gnupg lsb-release

# 3. åˆ›å»ºä¸´æ—¶ç›®å½•
mkdir -p /tmp/docker-install
cd /tmp/docker-install

# 4. ä¸‹è½½Dockerå®‰è£…åŒ… (éœ€è¦é¢„å…ˆä¸‹è½½å¹¶ä¸Šä¼ åˆ°æœåŠ¡å™¨)
# ä»Žæœ¬åœ°ä¸‹è½½ä»¥ä¸‹æ–‡ä»¶å¹¶ä¸Šä¼ åˆ°è…¾è®¯äº‘æœåŠ¡å™¨çš„ /tmp/docker-install/ ç›®å½•ï¼š
# - docker-ce_24.0.7-1~ubuntu.22.04~jammy_amd64.deb
# - docker-ce-cli_24.0.7-1~ubuntu.22.04~jammy_amd64.deb
# - containerd.io_1.7.8-1_amd64.deb
# - docker-buildx-plugin_0.12.1-1~ubuntu.22.04~jammy_amd64.deb
# - docker-compose-plugin_2.24.1-1~ubuntu.22.04~jammy_amd64.deb

# 5. å®‰è£…Docker (ç¦»çº¿å®‰è£…)
sudo dpkg -i containerd.io_1.7.8-1_amd64.deb
sudo dpkg -i docker-ce-cli_24.0.7-1~ubuntu.22.04~jammy_amd64.deb
sudo dpkg -i docker-ce_24.0.7-1~ubuntu.22.04~jammy_amd64.deb
sudo dpkg -i docker-buildx-plugin_0.12.1-1~ubuntu.22.04~jammy_amd64.deb
sudo dpkg -i docker-compose-plugin_2.24.1-1~ubuntu.22.04~jammy_amd64.deb

# 6. å¯åŠ¨DockeræœåŠ¡
sudo systemctl start docker
sudo systemctl enable docker

# 7. å°†ubuntuç”¨æˆ·æ·»åŠ åˆ°dockerç»„
sudo usermod -aG docker ubuntu

# 8. å®‰è£…Docker Compose (ç¦»çº¿å®‰è£…)
# ä¸‹è½½ docker-compose-linux-x86_64 å¹¶ä¸Šä¼ åˆ° /tmp/docker-install/
sudo cp docker-compose-linux-x86_64 /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose

# 9. éªŒè¯å®‰è£…
docker --version
docker-compose --version

# 10. æ¸…ç†ä¸´æ—¶æ–‡ä»¶
cd /
rm -rf /tmp/docker-install
```

#### **æ–¹æ³•å››ï¼šä½¿ç”¨é¢„ç¼–è¯‘DockeråŒ… (æŽ¨èç”¨äºŽç½‘ç»œå—é™çŽ¯å¢ƒ)**

```bash
# 1. æ›´æ–°ç³»ç»ŸåŒ…
sudo apt update && sudo apt upgrade -y

# 2. å®‰è£…å¿…è¦çš„ä¾èµ–
sudo apt install -y apt-transport-https ca-certificates curl gnupg lsb-release

# 3. åˆ›å»ºä¸´æ—¶ç›®å½•
mkdir -p /tmp/docker-install
cd /tmp/docker-install

# 4. ä¸Šä¼ é¢„ç¼–è¯‘çš„DockeråŒ…åˆ° /tmp/docker-install/ ç›®å½•
# éœ€è¦ä¸Šä¼ çš„æ–‡ä»¶ï¼š
# - docker-24.0.7.tgz (DockeräºŒè¿›åˆ¶æ–‡ä»¶)
# - docker-compose-2.24.1 (Docker ComposeäºŒè¿›åˆ¶æ–‡ä»¶)

# 5. è§£åŽ‹Docker
tar -xzf docker-24.0.7.tgz
sudo cp docker/* /usr/local/bin/
sudo chmod +x /usr/local/bin/docker*

# 6. å®‰è£…Docker Compose
sudo cp docker-compose-2.24.1 /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose

# 7. åˆ›å»ºDockeræœåŠ¡æ–‡ä»¶
sudo tee /etc/systemd/system/docker.service > /dev/null <<EOF
[Unit]
Description=Docker Application Container Engine
Documentation=https://docs.docker.com
After=network-online.target firewalld.service containerd.service time-set.target
Wants=network-online.target containerd.service
Requires=docker.socket containerd.service

[Service]
Type=notify
ExecStart=/usr/local/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock
ExecReload=/bin/kill -s HUP \$MAINPID
TimeoutStartSec=0
RestartSec=2
Restart=always
StartLimitBurst=3
StartLimitInterval=60s
LimitNOFILE=infinity
LimitNPROC=infinity
LimitCORE=infinity
TasksMax=infinity
Delegate=yes
KillMode=process
OOMScoreAdjust=-500

[Install]
WantedBy=multi-user.target
EOF

# 8. åˆ›å»ºDocker Socketæ–‡ä»¶
sudo tee /etc/systemd/system/docker.socket > /dev/null <<EOF
[Unit]
Description=Docker Socket for the API

[Socket]
ListenStream=/var/run/docker.sock
SocketMode=0660
SocketUser=root
SocketGroup=docker

[Install]
WantedBy=sockets.target
EOF

# 9. å¯åŠ¨DockeræœåŠ¡
sudo systemctl daemon-reload
sudo systemctl start docker
sudo systemctl enable docker

# 10. å°†ubuntuç”¨æˆ·æ·»åŠ åˆ°dockerç»„
sudo usermod -aG docker ubuntu

# 11. éªŒè¯å®‰è£…
docker --version
docker-compose --version

# 12. æ¸…ç†ä¸´æ—¶æ–‡ä»¶
cd /
rm -rf /tmp/docker-install
```

### **ç¬¬äºŒæ­¥ï¼šå®‰è£…Node.js (ç”¨äºŽWeaviate)**

```bash
# 1. å®‰è£…Node.js 18
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt install -y nodejs

# 2. éªŒè¯å®‰è£…
node --version
npm --version
```

### **ç¬¬ä¸‰æ­¥ï¼šå®‰è£…Java 21 (Neo4jä¾èµ–)**

```bash
# 1. æ›´æ–°åŒ…ç´¢å¼•
sudo apt update

# 2. å®‰è£…OpenJDK 21
sudo apt install -y openjdk-21-jdk

# 3. è®¾ç½®JAVA_HOMEçŽ¯å¢ƒå˜é‡
echo 'export JAVA_HOME=/usr/lib/jvm/java-21-openjdk-amd64' >> ~/.bashrc
echo 'export PATH=$JAVA_HOME/bin:$PATH' >> ~/.bashrc
source ~/.bashrc

# 4. éªŒè¯Javaå®‰è£…
java -version
javac -version

# 5. æ£€æŸ¥JAVA_HOME
echo $JAVA_HOME
```

### **ç¬¬å››æ­¥ï¼šå®‰è£…å…¶ä»–å¿…è¦ä¾èµ–**

```bash
# 1. å®‰è£…curlå’Œwget (ç”¨äºŽä¸‹è½½)
sudo apt install -y curl wget

# 2. å®‰è£…net-tools (ç”¨äºŽç½‘ç»œæ£€æŸ¥)
sudo apt install -y net-tools

# 3. å®‰è£…htop (ç”¨äºŽç³»ç»Ÿç›‘æŽ§)
sudo apt install -y htop

# 4. å®‰è£…vim (ç”¨äºŽæ–‡ä»¶ç¼–è¾‘)
sudo apt install -y vim

# 5. éªŒè¯æ‰€æœ‰ä¾èµ–
which curl wget netstat htop vim java node docker docker-compose
```

---

## ðŸ—„ï¸ æ•°æ®åº“å®‰è£…

### **ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºé¡¹ç›®ç›®å½•ç»“æž„**

```bash
# åˆ›å»ºå¤šç‰ˆæœ¬æ•°æ®åº“ç›®å½•ç»“æž„
sudo mkdir -p /opt/jobfirst-multi-version/{future,dao,blockchain,shared}
sudo mkdir -p /opt/jobfirst-multi-version/future/{config,scripts,data}
sudo mkdir -p /opt/jobfirst-multi-version/dao/{config,scripts,data}
sudo mkdir -p /opt/jobfirst-multi-version/blockchain/{config,scripts,data}
sudo mkdir -p /opt/jobfirst-multi-version/shared/{monitoring,logging,config}

# è®¾ç½®æƒé™
sudo chown -R ubuntu:ubuntu /opt/jobfirst-multi-version
```

### **ç¬¬äº”æ­¥ï¼šå®‰è£…Futureç‰ˆæ•°æ®åº“**

```bash
# è¿›å…¥Futureç‰ˆç›®å½•
cd /opt/jobfirst-multi-version/future

# åˆ›å»ºFutureç‰ˆDocker Composeæ–‡ä»¶
cat > docker-compose.yml << 'EOF'
version: '3.8'

services:
  # Futureç‰ˆMySQL (ç«¯å£3306)
  f-mysql:
    image: mysql:8.0.35
    container_name: f-mysql
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: f_mysql_root_2025
      MYSQL_DATABASE: f_mysql
      MYSQL_USER: f_mysql_user
      MYSQL_PASSWORD: f_mysql_password_2025
    ports:
      - "3306:3306"
    volumes:
      - f_mysql_data:/var/lib/mysql
      - ./config/mysql:/etc/mysql/conf.d
    networks:
      - f-network

  # Futureç‰ˆPostgreSQL (ç«¯å£5432)
  f-postgres:
    image: postgres:15.5
    container_name: f-postgres
    restart: always
    environment:
      POSTGRES_DB: f_pg
      POSTGRES_USER: f_pg_user
      POSTGRES_PASSWORD: f_pg_password_2025
    ports:
      - "5432:5432"
    volumes:
      - f_postgres_data:/var/lib/postgresql/data
      - ./config/postgres:/etc/postgresql
    networks:
      - f-network

  # Futureç‰ˆRedis (ç«¯å£6379)
  f-redis:
    image: redis:7.2-alpine
    container_name: f-redis
    restart: always
    command: redis-server --requirepass f_redis_password_2025
    ports:
      - "6379:6379"
    volumes:
      - f_redis_data:/data
      - ./config/redis:/usr/local/etc/redis
    networks:
      - f-network

  # Futureç‰ˆNeo4j (ç«¯å£7474/7687)
  f-neo4j:
    image: neo4j:5.15.0
    container_name: f-neo4j
    restart: always
    environment:
      NEO4J_AUTH: neo4j/f_neo4j_password_2025
      NEO4J_dbms_security_auth__enabled: "true"
    ports:
      - "7474:7474"
      - "7687:7687"
    volumes:
      - f_neo4j_data:/data
      - f_neo4j_logs:/logs
      - f_neo4j_import:/var/lib/neo4j/import
      - f_neo4j_plugins:/plugins
    networks:
      - f-network

  # Futureç‰ˆMongoDB (ç«¯å£27017)
  f-mongodb:
    image: mongo:7.0.4
    container_name: f-mongodb
    restart: always
    environment:
      MONGO_INITDB_ROOT_USERNAME: f_mongo_admin
      MONGO_INITDB_ROOT_PASSWORD: f_mongo_password_2025
      MONGO_INITDB_DATABASE: f_mongo
    ports:
      - "27017:27017"
    volumes:
      - f_mongodb_data:/data/db
      - ./config/mongodb:/etc/mongod
    networks:
      - f-network

  # Futureç‰ˆElasticsearch (ç«¯å£9200)
  f-elasticsearch:
    image: elasticsearch:8.11.1
    container_name: f-elasticsearch
    restart: always
    environment:
      - discovery.type=single-node
      - xpack.security.enabled=false
      - "ES_JAVA_OPTS=-Xms512m -Xmx512m"
    ports:
      - "9200:9200"
    volumes:
      - f_elasticsearch_data:/usr/share/elasticsearch/data
    networks:
      - f-network

  # Futureç‰ˆWeaviate (ç«¯å£8082)
  f-weaviate:
    image: semitechnologies/weaviate:1.21.5
    container_name: f-weaviate
    restart: always
    environment:
      QUERY_DEFAULTS_LIMIT: 25
      AUTHENTICATION_ANONYMOUS_ACCESS_ENABLED: 'true'
      PERSISTENCE_DATA_PATH: '/var/lib/weaviate'
      DEFAULT_VECTORIZER_MODULE: 'none'
      ENABLE_MODULES: 'text2vec-cohere,text2vec-huggingface,text2vec-palm,text2vec-openai,generative-openai,generative-cohere,generative-palm,ref2vec-centroid,reranker-cohere,qna-openai'
      CLUSTER_HOSTNAME: 'node1'
    ports:
      - "8082:8080"
    volumes:
      - f_weaviate_data:/var/lib/weaviate
    networks:
      - f-network

  # Futureç‰ˆAIæœåŠ¡æ•°æ®åº“ (ç«¯å£5435)
  f-ai-service-db:
    image: postgres:15.5
    container_name: f-ai-service-db
    restart: always
    environment:
      POSTGRES_DB: f_ai
      POSTGRES_USER: f_ai_user
      POSTGRES_PASSWORD: f_ai_password_2025
    ports:
      - "5435:5432"
    volumes:
      - f_ai_service_data:/var/lib/postgresql/data
    networks:
      - f-network

  # Futureç‰ˆDAOç³»ç»Ÿæ•°æ®åº“ (ç«¯å£9506)
  f-dao-system-db:
    image: postgres:15.5
    container_name: f-dao-system-db
    restart: always
    environment:
      POSTGRES_DB: f_dao
      POSTGRES_USER: f_dao_user
      POSTGRES_PASSWORD: f_dao_password_2025
    ports:
      - "9506:5432"
    volumes:
      - f_dao_system_data:/var/lib/postgresql/data
    networks:
      - f-network

  # Futureç‰ˆä¼ä¸šä¿¡ç”¨æ•°æ®åº“ (ç«¯å£7534)
  f-enterprise-credit-db:
    image: postgres:15.5
    container_name: f-enterprise-credit-db
    restart: always
    environment:
      POSTGRES_DB: f_credit
      POSTGRES_USER: f_credit_user
      POSTGRES_PASSWORD: f_credit_password_2025
    ports:
      - "7534:5432"
    volumes:
      - f_enterprise_credit_data:/var/lib/postgresql/data
    networks:
      - f-network

volumes:
  f_mysql_data:
  f_postgres_data:
  f_redis_data:
  f_neo4j_data:
  f_neo4j_logs:
  f_neo4j_import:
  f_neo4j_plugins:
  f_mongodb_data:
  f_elasticsearch_data:
  f_weaviate_data:
  f_ai_service_data:
  f_dao_system_data:
  f_enterprise_credit_data:

networks:
  f-network:
    driver: bridge
EOF

# å¯åŠ¨Futureç‰ˆæ•°æ®åº“
docker-compose up -d

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
docker-compose ps
```

### **ç¬¬å…­æ­¥ï¼šå®‰è£…DAOç‰ˆæ•°æ®åº“**

```bash
# è¿›å…¥DAOç‰ˆç›®å½•
cd /opt/jobfirst-multi-version/dao

# åˆ›å»ºDAOç‰ˆDocker Composeæ–‡ä»¶
cat > docker-compose.yml << 'EOF'
version: '3.8'

services:
  # DAOç‰ˆMySQL (ç«¯å£3307)
  d-mysql:
    image: mysql:8.0
    container_name: d-mysql
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: d_mysql_root_2025
      MYSQL_DATABASE: d_mysql
      MYSQL_USER: d_mysql_user
      MYSQL_PASSWORD: d_mysql_password_2025
    ports:
      - "3307:3306"
    volumes:
      - d_mysql_data:/var/lib/mysql
    networks:
      - d-network

  # DAOç‰ˆPostgreSQL (ç«¯å£5433)
  d-postgres:
    image: postgres:15
    container_name: d-postgres
    restart: always
    environment:
      POSTGRES_DB: d_pg
      POSTGRES_USER: d_pg_user
      POSTGRES_PASSWORD: d_pg_password_2025
    ports:
      - "5433:5432"
    volumes:
      - d_postgres_data:/var/lib/postgresql/data
    networks:
      - d-network

  # DAOç‰ˆRedis (ç«¯å£6380)
  d-redis:
    image: redis:7-alpine
    container_name: d-redis
    restart: always
    command: redis-server --requirepass d_redis_password_2025
    ports:
      - "6380:6379"
    volumes:
      - d_redis_data:/data
    networks:
      - d-network

  # DAOç‰ˆNeo4j (ç«¯å£7475/7688)
  d-neo4j:
    image: neo4j:5.15
    container_name: d-neo4j
    restart: always
    environment:
      NEO4J_AUTH: neo4j/d_neo4j_password_2025
      NEO4J_dbms_security_auth__enabled: "true"
    ports:
      - "7475:7474"
      - "7688:7687"
    volumes:
      - d_neo4j_data:/data
      - d_neo4j_logs:/logs
      - d_neo4j_import:/var/lib/neo4j/import
      - d_neo4j_plugins:/plugins
    networks:
      - d-network

  # DAOç‰ˆMongoDB (ç«¯å£27018)
  d-mongodb:
    image: mongo:7
    container_name: d-mongodb
    restart: always
    environment:
      MONGO_INITDB_ROOT_USERNAME: d_mongo_admin
      MONGO_INITDB_ROOT_PASSWORD: d_mongo_password_2025
      MONGO_INITDB_DATABASE: d_mongo
    ports:
      - "27018:27017"
    volumes:
      - d_mongodb_data:/data/db
    networks:
      - d-network

  # DAOç‰ˆElasticsearch (ç«¯å£9201)
  d-elasticsearch:
    image: elasticsearch:8.11.0
    container_name: d-elasticsearch
    restart: always
    environment:
      - discovery.type=single-node
      - xpack.security.enabled=false
      - "ES_JAVA_OPTS=-Xms512m -Xmx512m"
    ports:
      - "9201:9200"
    volumes:
      - d_elasticsearch_data:/usr/share/elasticsearch/data
    networks:
      - d-network

  # DAOç‰ˆWeaviate (ç«¯å£8083)
  d-weaviate:
    image: semitechnologies/weaviate:1.21.0
    container_name: d-weaviate
    restart: always
    environment:
      QUERY_DEFAULTS_LIMIT: 25
      AUTHENTICATION_ANONYMOUS_ACCESS_ENABLED: 'true'
      PERSISTENCE_DATA_PATH: '/var/lib/weaviate'
      DEFAULT_VECTORIZER_MODULE: 'none'
      ENABLE_MODULES: 'text2vec-cohere,text2vec-huggingface,text2vec-palm,text2vec-openai,generative-openai,generative-cohere,generative-palm,ref2vec-centroid,reranker-cohere,qna-openai'
      CLUSTER_HOSTNAME: 'node1'
    ports:
      - "8083:8080"
    volumes:
      - d_weaviate_data:/var/lib/weaviate
    networks:
      - d-network

  # DAOç‰ˆAIæœåŠ¡æ•°æ®åº“ (ç«¯å£5436)
  d-ai-service-db:
    image: postgres:15
    container_name: d-ai-service-db
    restart: always
    environment:
      POSTGRES_DB: d_ai
      POSTGRES_USER: d_ai_user
      POSTGRES_PASSWORD: d_ai_password_2025
    ports:
      - "5436:5432"
    volumes:
      - d_ai_service_data:/var/lib/postgresql/data
    networks:
      - d-network

  # DAOç‰ˆDAOç³»ç»Ÿæ•°æ®åº“ (ç«¯å£9507)
  d-dao-system-db:
    image: postgres:15
    container_name: d-dao-system-db
    restart: always
    environment:
      POSTGRES_DB: d_dao
      POSTGRES_USER: d_dao_user
      POSTGRES_PASSWORD: d_dao_password_2025
    ports:
      - "9507:5432"
    volumes:
      - d_dao_system_data:/var/lib/postgresql/data
    networks:
      - d-network

  # DAOç‰ˆä¼ä¸šä¿¡ç”¨æ•°æ®åº“ (ç«¯å£7535)
  d-enterprise-credit-db:
    image: postgres:15
    container_name: d-enterprise-credit-db
    restart: always
    environment:
      POSTGRES_DB: d_credit
      POSTGRES_USER: d_credit_user
      POSTGRES_PASSWORD: d_credit_password_2025
    ports:
      - "7535:5432"
    volumes:
      - d_enterprise_credit_data:/var/lib/postgresql/data
    networks:
      - d-network

volumes:
  d_mysql_data:
  d_postgres_data:
  d_redis_data:
  d_neo4j_data:
  d_neo4j_logs:
  d_neo4j_import:
  d_neo4j_plugins:
  d_mongodb_data:
  d_elasticsearch_data:
  d_weaviate_data:
  d_ai_service_data:
  d_dao_system_data:
  d_enterprise_credit_data:

networks:
  d-network:
    driver: bridge
EOF

# å¯åŠ¨DAOç‰ˆæ•°æ®åº“
docker-compose up -d

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
docker-compose ps
```

### **ç¬¬ä¸ƒæ­¥ï¼šå®‰è£…åŒºå—é“¾ç‰ˆæ•°æ®åº“**

```bash
# è¿›å…¥åŒºå—é“¾ç‰ˆç›®å½•
cd /opt/jobfirst-multi-version/blockchain

# åˆ›å»ºåŒºå—é“¾ç‰ˆDocker Composeæ–‡ä»¶
cat > docker-compose.yml << 'EOF'
version: '3.8'

services:
  # åŒºå—é“¾ç‰ˆMySQL (ç«¯å£3308)
  b-mysql:
    image: mysql:8.0
    container_name: b-mysql
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: b_mysql_root_2025
      MYSQL_DATABASE: b_mysql
      MYSQL_USER: b_mysql_user
      MYSQL_PASSWORD: b_mysql_password_2025
    ports:
      - "3308:3306"
    volumes:
      - b_mysql_data:/var/lib/mysql
    networks:
      - b-network

  # åŒºå—é“¾ç‰ˆPostgreSQL (ç«¯å£5434)
  b-postgres:
    image: postgres:15
    container_name: b-postgres
    restart: always
    environment:
      POSTGRES_DB: b_pg
      POSTGRES_USER: b_pg_user
      POSTGRES_PASSWORD: b_pg_password_2025
    ports:
      - "5434:5432"
    volumes:
      - b_postgres_data:/var/lib/postgresql/data
    networks:
      - b-network

  # åŒºå—é“¾ç‰ˆRedis (ç«¯å£6381)
  b-redis:
    image: redis:7-alpine
    container_name: b-redis
    restart: always
    command: redis-server --requirepass b_redis_password_2025
    ports:
      - "6381:6379"
    volumes:
      - b_redis_data:/data
    networks:
      - b-network

  # åŒºå—é“¾ç‰ˆNeo4j (ç«¯å£7476/7689)
  b-neo4j:
    image: neo4j:5.15
    container_name: b-neo4j
    restart: always
    environment:
      NEO4J_AUTH: neo4j/b_neo4j_password_2025
      NEO4J_dbms_security_auth__enabled: "true"
    ports:
      - "7476:7474"
      - "7689:7687"
    volumes:
      - b_neo4j_data:/data
      - b_neo4j_logs:/logs
      - b_neo4j_import:/var/lib/neo4j/import
      - b_neo4j_plugins:/plugins
    networks:
      - b-network

  # åŒºå—é“¾ç‰ˆMongoDB (ç«¯å£27019)
  b-mongodb:
    image: mongo:7
    container_name: b-mongodb
    restart: always
    environment:
      MONGO_INITDB_ROOT_USERNAME: b_mongo_admin
      MONGO_INITDB_ROOT_PASSWORD: b_mongo_password_2025
      MONGO_INITDB_DATABASE: b_mongo
    ports:
      - "27019:27017"
    volumes:
      - b_mongodb_data:/data/db
    networks:
      - b-network

  # åŒºå—é“¾ç‰ˆElasticsearch (ç«¯å£9202)
  b-elasticsearch:
    image: elasticsearch:8.11.0
    container_name: b-elasticsearch
    restart: always
    environment:
      - discovery.type=single-node
      - xpack.security.enabled=false
      - "ES_JAVA_OPTS=-Xms512m -Xmx512m"
    ports:
      - "9202:9200"
    volumes:
      - b_elasticsearch_data:/usr/share/elasticsearch/data
    networks:
      - b-network

  # åŒºå—é“¾ç‰ˆWeaviate (ç«¯å£8084)
  b-weaviate:
    image: semitechnologies/weaviate:1.21.0
    container_name: b-weaviate
    restart: always
    environment:
      QUERY_DEFAULTS_LIMIT: 25
      AUTHENTICATION_ANONYMOUS_ACCESS_ENABLED: 'true'
      PERSISTENCE_DATA_PATH: '/var/lib/weaviate'
      DEFAULT_VECTORIZER_MODULE: 'none'
      ENABLE_MODULES: 'text2vec-cohere,text2vec-huggingface,text2vec-palm,text2vec-openai,generative-openai,generative-cohere,generative-palm,ref2vec-centroid,reranker-cohere,qna-openai'
      CLUSTER_HOSTNAME: 'node1'
    ports:
      - "8084:8080"
    volumes:
      - b_weaviate_data:/var/lib/weaviate
    networks:
      - b-network

  # åŒºå—é“¾ç‰ˆAIæœåŠ¡æ•°æ®åº“ (ç«¯å£5437)
  b-ai-service-db:
    image: postgres:15
    container_name: b-ai-service-db
    restart: always
    environment:
      POSTGRES_DB: b_ai
      POSTGRES_USER: b_ai_user
      POSTGRES_PASSWORD: b_ai_password_2025
    ports:
      - "5437:5432"
    volumes:
      - b_ai_service_data:/var/lib/postgresql/data
    networks:
      - b-network

  # åŒºå—é“¾ç‰ˆDAOç³»ç»Ÿæ•°æ®åº“ (ç«¯å£9508)
  b-dao-system-db:
    image: postgres:15
    container_name: b-dao-system-db
    restart: always
    environment:
      POSTGRES_DB: b_dao
      POSTGRES_USER: b_dao_user
      POSTGRES_PASSWORD: b_dao_password_2025
    ports:
      - "9508:5432"
    volumes:
      - b_dao_system_data:/var/lib/postgresql/data
    networks:
      - b-network

  # åŒºå—é“¾ç‰ˆä¼ä¸šä¿¡ç”¨æ•°æ®åº“ (ç«¯å£7536)
  b-enterprise-credit-db:
    image: postgres:15
    container_name: b-enterprise-credit-db
    restart: always
    environment:
      POSTGRES_DB: b_credit
      POSTGRES_USER: b_credit_user
      POSTGRES_PASSWORD: b_credit_password_2025
    ports:
      - "7536:5432"
    volumes:
      - b_enterprise_credit_data:/var/lib/postgresql/data
    networks:
      - b-network

volumes:
  b_mysql_data:
  b_postgres_data:
  b_redis_data:
  b_neo4j_data:
  b_neo4j_logs:
  b_neo4j_import:
  b_neo4j_plugins:
  b_mongodb_data:
  b_elasticsearch_data:
  b_weaviate_data:
  b_ai_service_data:
  b_dao_system_data:
  b_enterprise_credit_data:

networks:
  b-network:
    driver: bridge
EOF

# å¯åŠ¨åŒºå—é“¾ç‰ˆæ•°æ®åº“
docker-compose up -d

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
docker-compose ps
```

---

## ðŸ” éªŒè¯å®‰è£…

### **ç¬¬å…«æ­¥ï¼šæ£€æŸ¥æ‰€æœ‰æœåŠ¡çŠ¶æ€**

```bash
# æ£€æŸ¥æ‰€æœ‰å®¹å™¨çŠ¶æ€
docker ps -a

# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tlnp | grep -E "(3306|3307|3308|5432|5433|5434|5435|5436|5437|6379|6380|6381|7474|7475|7476|7687|7688|7689|27017|27018|27019|9200|9201|9202|8082|8083|8084|9506|9507|9508|7534|7535|7536)"

# æ£€æŸ¥ç½‘ç»œ
docker network ls
```

### **ç¬¬ä¹æ­¥ï¼šæµ‹è¯•æ•°æ®åº“è¿žæŽ¥**

```bash
# æµ‹è¯•MySQLè¿žæŽ¥
docker exec -it f-mysql mysql -u f_mysql_user -p -e "SHOW DATABASES;"
docker exec -it d-mysql mysql -u d_mysql_user -p -e "SHOW DATABASES;"
docker exec -it b-mysql mysql -u b_mysql_user -p -e "SHOW DATABASES;"

# æµ‹è¯•PostgreSQLè¿žæŽ¥
docker exec -it f-postgres psql -U f_pg_user -d f_pg -c "\l"
docker exec -it d-postgres psql -U d_pg_user -d d_pg -c "\l"
docker exec -it b-postgres psql -U b_pg_user -d b_pg -c "\l"

# æµ‹è¯•Redisè¿žæŽ¥
docker exec -it f-redis redis-cli -a f_redis_password_2025 ping
docker exec -it d-redis redis-cli -a d_redis_password_2025 ping
docker exec -it b-redis redis-cli -a b_redis_password_2025 ping

# æµ‹è¯•Neo4jè¿žæŽ¥
curl -u neo4j:f_neo4j_password_2025 http://localhost:7474/db/data/
curl -u neo4j:d_neo4j_password_2025 http://localhost:7475/db/data/
curl -u neo4j:b_neo4j_password_2025 http://localhost:7476/db/data/

# æµ‹è¯•MongoDBè¿žæŽ¥
docker exec -it f-mongodb mongosh --eval "db.adminCommand('ismaster')"
docker exec -it d-mongodb mongosh --eval "db.adminCommand('ismaster')"
docker exec -it b-mongodb mongosh --eval "db.adminCommand('ismaster')"

# æµ‹è¯•Elasticsearchè¿žæŽ¥
curl http://localhost:9200/
curl http://localhost:9201/
curl http://localhost:9202/

# æµ‹è¯•Weaviateè¿žæŽ¥
curl http://localhost:8082/v1/meta
curl http://localhost:8083/v1/meta
curl http://localhost:8084/v1/meta
```

---

## ðŸ“Š å®‰è£…æ€»ç»“

### **å·²å®‰è£…çš„æ•°æ®åº“**

| ç‰ˆæœ¬ | æ•°æ®åº“ç±»åž‹ | å®¹å™¨åç§° | ç«¯å£ | çŠ¶æ€ |
|------|------------|----------|------|------|
| **Futureç‰ˆ** | MySQL | f-mysql | 3306 | âœ… |
| **Futureç‰ˆ** | PostgreSQL | f-postgres | 5432 | âœ… |
| **Futureç‰ˆ** | Redis | f-redis | 6379 | âœ… |
| **Futureç‰ˆ** | Neo4j | f-neo4j | 7474/7687 | âœ… |
| **Futureç‰ˆ** | MongoDB | f-mongodb | 27017 | âœ… |
| **Futureç‰ˆ** | Elasticsearch | f-elasticsearch | 9200 | âœ… |
| **Futureç‰ˆ** | Weaviate | f-weaviate | 8082 | âœ… |
| **Futureç‰ˆ** | AIæœåŠ¡æ•°æ®åº“ | f-ai-service-db | 5435 | âœ… |
| **Futureç‰ˆ** | DAOç³»ç»Ÿæ•°æ®åº“ | f-dao-system-db | 9506 | âœ… |
| **Futureç‰ˆ** | ä¼ä¸šä¿¡ç”¨æ•°æ®åº“ | f-enterprise-credit-db | 7534 | âœ… |
| **DAOç‰ˆ** | MySQL | d-mysql | 3307 | âœ… |
| **DAOç‰ˆ** | PostgreSQL | d-postgres | 5433 | âœ… |
| **DAOç‰ˆ** | Redis | d-redis | 6380 | âœ… |
| **DAOç‰ˆ** | Neo4j | d-neo4j | 7475/7688 | âœ… |
| **DAOç‰ˆ** | MongoDB | d-mongodb | 27018 | âœ… |
| **DAOç‰ˆ** | Elasticsearch | d-elasticsearch | 9201 | âœ… |
| **DAOç‰ˆ** | Weaviate | d-weaviate | 8083 | âœ… |
| **DAOç‰ˆ** | AIæœåŠ¡æ•°æ®åº“ | d-ai-service-db | 5436 | âœ… |
| **DAOç‰ˆ** | DAOç³»ç»Ÿæ•°æ®åº“ | d-dao-system-db | 9507 | âœ… |
| **DAOç‰ˆ** | ä¼ä¸šä¿¡ç”¨æ•°æ®åº“ | d-enterprise-credit-db | 7535 | âœ… |
| **åŒºå—é“¾ç‰ˆ** | MySQL | b-mysql | 3308 | âœ… |
| **åŒºå—é“¾ç‰ˆ** | PostgreSQL | b-postgres | 5434 | âœ… |
| **åŒºå—é“¾ç‰ˆ** | Redis | b-redis | 6381 | âœ… |
| **åŒºå—é“¾ç‰ˆ** | Neo4j | b-neo4j | 7476/7689 | âœ… |
| **åŒºå—é“¾ç‰ˆ** | MongoDB | b-mongodb | 27019 | âœ… |
| **åŒºå—é“¾ç‰ˆ** | Elasticsearch | b-elasticsearch | 9202 | âœ… |
| **åŒºå—é“¾ç‰ˆ** | Weaviate | b-weaviate | 8084 | âœ… |
| **åŒºå—é“¾ç‰ˆ** | AIæœåŠ¡æ•°æ®åº“ | b-ai-service-db | 5437 | âœ… |
| **åŒºå—é“¾ç‰ˆ** | DAOç³»ç»Ÿæ•°æ®åº“ | b-dao-system-db | 9508 | âœ… |
| **åŒºå—é“¾ç‰ˆ** | ä¼ä¸šä¿¡ç”¨æ•°æ®åº“ | b-enterprise-credit-db | 7536 | âœ… |

### **æ€»è®¡å®‰è£…æ•°é‡**
- **æ•°æ®åº“å®¹å™¨**: 30ä¸ª (10ä¸ªç±»åž‹ Ã— 3ä¸ªç‰ˆæœ¬)
- **æ•°æ®å·**: 30ä¸ª (10ä¸ªæ•°æ®å· Ã— 3ä¸ªç‰ˆæœ¬)
- **ç½‘ç»œ**: 3ä¸ª (f-network, d-network, b-network)
- **ç«¯å£**: 93ä¸ª (31ä¸ªç«¯å£ Ã— 3ä¸ªç‰ˆæœ¬)

**è…¾è®¯äº‘æ•°æ®åº“å®‰è£…å®Œæˆï¼æ‰€æœ‰æ•°æ®åº“å·²æŒ‰ç…§å‘½åè§„èŒƒè®¡åˆ’æˆåŠŸéƒ¨ç½²ï¼** ðŸš€

---

## ðŸ”„ ç‰ˆæœ¬åˆ‡æ¢ç®¡ç†

### **ç‰ˆæœ¬åˆ‡æ¢è„šæœ¬**

#### **åˆ›å»ºç‰ˆæœ¬åˆ‡æ¢è„šæœ¬**

```bash
# åˆ›å»ºç‰ˆæœ¬åˆ‡æ¢ç®¡ç†ç›®å½•
sudo mkdir -p /opt/jobfirst-multi-version/scripts
sudo chown ubuntu:ubuntu /opt/jobfirst-multi-version/scripts

# åˆ›å»ºç‰ˆæœ¬åˆ‡æ¢è„šæœ¬
cat > /opt/jobfirst-multi-version/scripts/switch_version.sh << 'EOF'
#!/bin/bash

# ç‰ˆæœ¬åˆ‡æ¢è„šæœ¬
# ç”¨æ³•: ./switch_version.sh [future|dao|blockchain]

VERSION=$1
BASE_DIR="/opt/jobfirst-multi-version"

if [ -z "$VERSION" ]; then
    echo "ç”¨æ³•: $0 [future|dao|blockchain]"
    echo "å½“å‰è¿è¡Œç‰ˆæœ¬:"
    docker ps --format "table {{.Names}}\t{{.Status}}" | grep -E "(f-|d-|b-)"
    exit 1
fi

echo "=== åˆ‡æ¢åˆ° $VERSION ç‰ˆæœ¬ ==="

# åœæ­¢æ‰€æœ‰ç‰ˆæœ¬
echo "åœæ­¢æ‰€æœ‰ç‰ˆæœ¬æ•°æ®åº“..."
cd $BASE_DIR/future && docker-compose down 2>/dev/null || true
cd $BASE_DIR/dao && docker-compose down 2>/dev/null || true
cd $BASE_DIR/blockchain && docker-compose down 2>/dev/null || true

# ç­‰å¾…æ‰€æœ‰å®¹å™¨åœæ­¢
sleep 5

# å¯åŠ¨æŒ‡å®šç‰ˆæœ¬
case $VERSION in
    "future")
        echo "å¯åŠ¨ Future ç‰ˆæ•°æ®åº“..."
        cd $BASE_DIR/future
        docker-compose up -d
        echo "Future ç‰ˆæ•°æ®åº“å·²å¯åŠ¨"
        echo "è®¿é—®åœ°å€: http://101.33.251.158:7474 (Neo4j)"
        echo "è®¿é—®åœ°å€: http://101.33.251.158:9200 (Elasticsearch)"
        echo "è®¿é—®åœ°å€: http://101.33.251.158:8082 (Weaviate)"
        ;;
    "dao")
        echo "å¯åŠ¨ DAO ç‰ˆæ•°æ®åº“..."
        cd $BASE_DIR/dao
        docker-compose up -d
        echo "DAO ç‰ˆæ•°æ®åº“å·²å¯åŠ¨"
        echo "è®¿é—®åœ°å€: http://101.33.251.158:7475 (Neo4j)"
        echo "è®¿é—®åœ°å€: http://101.33.251.158:9201 (Elasticsearch)"
        echo "è®¿é—®åœ°å€: http://101.33.251.158:8083 (Weaviate)"
        ;;
    "blockchain")
        echo "å¯åŠ¨åŒºå—é“¾ç‰ˆæ•°æ®åº“..."
        cd $BASE_DIR/blockchain
        docker-compose up -d
        echo "åŒºå—é“¾ç‰ˆæ•°æ®åº“å·²å¯åŠ¨"
        echo "è®¿é—®åœ°å€: http://101.33.251.158:7476 (Neo4j)"
        echo "è®¿é—®åœ°å€: http://101.33.251.158:9202 (Elasticsearch)"
        echo "è®¿é—®åœ°å€: http://101.33.251.158:8084 (Weaviate)"
        ;;
    *)
        echo "é”™è¯¯: ä¸æ”¯æŒçš„ç‰ˆæœ¬ '$VERSION'"
        echo "æ”¯æŒçš„ç‰ˆæœ¬: future, dao, blockchain"
        exit 1
        ;;
esac

# ç­‰å¾…æœåŠ¡å¯åŠ¨
echo "ç­‰å¾…æœåŠ¡å¯åŠ¨..."
sleep 15

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
echo "=== æœåŠ¡çŠ¶æ€æ£€æŸ¥ ==="
docker ps --format "table {{.Names}}\t{{.Status}}\t{{.Ports}}" | grep -E "(f-|d-|b-)"

echo "=== $VERSION ç‰ˆæœ¬åˆ‡æ¢å®Œæˆ ==="
EOF

# è®¾ç½®æ‰§è¡Œæƒé™
chmod +x /opt/jobfirst-multi-version/scripts/switch_version.sh
```

#### **åˆ›å»ºå¿«é€Ÿåˆ‡æ¢è„šæœ¬**

```bash
# åˆ›å»ºå¿«é€Ÿåˆ‡æ¢è„šæœ¬
cat > /opt/jobfirst-multi-version/switch_to_future.sh << 'EOF'
#!/bin/bash
/opt/jobfirst-multi-version/scripts/switch_version.sh future
EOF

cat > /opt/jobfirst-multi-version/switch_to_dao.sh << 'EOF'
#!/bin/bash
/opt/jobfirst-multi-version/scripts/switch_version.sh dao
EOF

cat > /opt/jobfirst-multi-version/switch_to_blockchain.sh << 'EOF'
#!/bin/bash
/opt/jobfirst-multi-version/scripts/switch_version.sh blockchain
EOF

# è®¾ç½®æ‰§è¡Œæƒé™
chmod +x /opt/jobfirst-multi-version/switch_to_*.sh
```

### **ç‰ˆæœ¬åˆ‡æ¢ä½¿ç”¨è¯´æ˜Ž**

#### **åŸºæœ¬ç”¨æ³•**
```bash
# åˆ‡æ¢åˆ°Futureç‰ˆ
./switch_to_future.sh

# åˆ‡æ¢åˆ°DAOç‰ˆ
./switch_to_dao.sh

# åˆ‡æ¢åˆ°åŒºå—é“¾ç‰ˆ
./switch_to_blockchain.sh

# æŸ¥çœ‹å½“å‰ç‰ˆæœ¬
/opt/jobfirst-multi-version/scripts/switch_version.sh
```

#### **ç‰ˆæœ¬çŠ¶æ€æ£€æŸ¥**
```bash
# æ£€æŸ¥å½“å‰è¿è¡Œç‰ˆæœ¬
docker ps --format "table {{.Names}}\t{{.Status}}\t{{.Ports}}" | grep -E "(f-|d-|b-)"

# æ£€æŸ¥æ‰€æœ‰ç‰ˆæœ¬çŠ¶æ€
echo "=== Futureç‰ˆçŠ¶æ€ ==="
cd /opt/jobfirst-multi-version/future && docker-compose ps

echo "=== DAOç‰ˆçŠ¶æ€ ==="
cd /opt/jobfirst-multi-version/dao && docker-compose ps

echo "=== åŒºå—é“¾ç‰ˆçŠ¶æ€ ==="
cd /opt/jobfirst-multi-version/blockchain && docker-compose ps
```

### **ç‰ˆæœ¬åˆ‡æ¢ä¼˜åŠ¿**

1. **èµ„æºä¼˜åŒ–**: åŒä¸€æ—¶é—´åªè¿è¡Œä¸€ä¸ªç‰ˆæœ¬ï¼Œé¿å…èµ„æºå†²çª
2. **ç®¡ç†ç®€åŒ–**: é€šè¿‡è„šæœ¬å¿«é€Ÿåˆ‡æ¢ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œ
3. **æ•°æ®éš”ç¦»**: æ¯ä¸ªç‰ˆæœ¬ä½¿ç”¨ç‹¬ç«‹çš„æ•°æ®å·å’Œç½‘ç»œ
4. **ç«¯å£ç»Ÿä¸€**: æ¯ä¸ªç‰ˆæœ¬ä½¿ç”¨ç›¸åŒçš„å†…éƒ¨ç«¯å£ï¼Œå¤–éƒ¨ç«¯å£ä¸åŒ
5. **æ•…éšœéš”ç¦»**: ä¸€ä¸ªç‰ˆæœ¬çš„é—®é¢˜ä¸ä¼šå½±å“å…¶ä»–ç‰ˆæœ¬

---

## ðŸ”¥ é˜²ç«å¢™é…ç½® (ç‰ˆæœ¬åˆ‡æ¢æ¨¡å¼)

### **æ™ºèƒ½é˜²ç«å¢™é…ç½®è„šæœ¬**

```bash
# åˆ›å»ºé˜²ç«å¢™ç®¡ç†è„šæœ¬
cat > /opt/jobfirst-multi-version/scripts/firewall_manager.sh << 'EOF'
#!/bin/bash

# é˜²ç«å¢™ç®¡ç†è„šæœ¬
# ç”¨æ³•: ./firewall_manager.sh [future|dao|blockchain|all|status]

VERSION=$1
BASE_DIR="/opt/jobfirst-multi-version"

if [ -z "$VERSION" ]; then
    echo "ç”¨æ³•: $0 [future|dao|blockchain|all|status]"
    echo "å½“å‰é˜²ç«å¢™çŠ¶æ€:"
    sudo ufw status numbered
    exit 1
fi

# å¯ç”¨é˜²ç«å¢™
sudo ufw --force enable

# å…è®¸SSHè¿žæŽ¥
sudo ufw allow 22 comment 'SSH'

case $VERSION in
    "future")
        echo "é…ç½® Future ç‰ˆé˜²ç«å¢™è§„åˆ™..."
        sudo ufw allow 3306 comment 'Future MySQL'
        sudo ufw allow 5432 comment 'Future PostgreSQL'
        sudo ufw allow 5435 comment 'Future AI Service DB'
        sudo ufw allow 6379 comment 'Future Redis'
        sudo ufw allow 7474 comment 'Future Neo4j HTTP'
        sudo ufw allow 7687 comment 'Future Neo4j Bolt'
        sudo ufw allow 27017 comment 'Future MongoDB'
        sudo ufw allow 9200 comment 'Future Elasticsearch'
        sudo ufw allow 8082 comment 'Future Weaviate'
        sudo ufw allow 9506 comment 'Future DAO System DB'
        sudo ufw allow 7534 comment 'Future Enterprise Credit DB'
        echo "Future ç‰ˆé˜²ç«å¢™è§„åˆ™å·²é…ç½®"
        ;;
    "dao")
        echo "é…ç½® DAO ç‰ˆé˜²ç«å¢™è§„åˆ™..."
        sudo ufw allow 3307 comment 'DAO MySQL'
        sudo ufw allow 5433 comment 'DAO PostgreSQL'
        sudo ufw allow 5436 comment 'DAO AI Service DB'
        sudo ufw allow 6380 comment 'DAO Redis'
        sudo ufw allow 7475 comment 'DAO Neo4j HTTP'
        sudo ufw allow 7688 comment 'DAO Neo4j Bolt'
        sudo ufw allow 27018 comment 'DAO MongoDB'
        sudo ufw allow 9201 comment 'DAO Elasticsearch'
        sudo ufw allow 8083 comment 'DAO Weaviate'
        sudo ufw allow 9507 comment 'DAO DAO System DB'
        sudo ufw allow 7535 comment 'DAO Enterprise Credit DB'
        echo "DAO ç‰ˆé˜²ç«å¢™è§„åˆ™å·²é…ç½®"
        ;;
    "blockchain")
        echo "é…ç½®åŒºå—é“¾ç‰ˆé˜²ç«å¢™è§„åˆ™..."
        sudo ufw allow 3308 comment 'Blockchain MySQL'
        sudo ufw allow 5434 comment 'Blockchain PostgreSQL'
        sudo ufw allow 5437 comment 'Blockchain AI Service DB'
        sudo ufw allow 6381 comment 'Blockchain Redis'
        sudo ufw allow 7476 comment 'Blockchain Neo4j HTTP'
        sudo ufw allow 7689 comment 'Blockchain Neo4j Bolt'
        sudo ufw allow 27019 comment 'Blockchain MongoDB'
        sudo ufw allow 9202 comment 'Blockchain Elasticsearch'
        sudo ufw allow 8084 comment 'Blockchain Weaviate'
        sudo ufw allow 9508 comment 'Blockchain DAO System DB'
        sudo ufw allow 7536 comment 'Blockchain Enterprise Credit DB'
        echo "åŒºå—é“¾ç‰ˆé˜²ç«å¢™è§„åˆ™å·²é…ç½®"
        ;;
    "all")
        echo "é…ç½®æ‰€æœ‰ç‰ˆæœ¬é˜²ç«å¢™è§„åˆ™..."
        # Futureç‰ˆ
        sudo ufw allow 3306 comment 'Future MySQL'
        sudo ufw allow 5432 comment 'Future PostgreSQL'
        sudo ufw allow 5435 comment 'Future AI Service DB'
        sudo ufw allow 6379 comment 'Future Redis'
        sudo ufw allow 7474 comment 'Future Neo4j HTTP'
        sudo ufw allow 7687 comment 'Future Neo4j Bolt'
        sudo ufw allow 27017 comment 'Future MongoDB'
        sudo ufw allow 9200 comment 'Future Elasticsearch'
        sudo ufw allow 8082 comment 'Future Weaviate'
        sudo ufw allow 9506 comment 'Future DAO System DB'
        sudo ufw allow 7534 comment 'Future Enterprise Credit DB'
        
        # DAOç‰ˆ
        sudo ufw allow 3307 comment 'DAO MySQL'
        sudo ufw allow 5433 comment 'DAO PostgreSQL'
        sudo ufw allow 5436 comment 'DAO AI Service DB'
        sudo ufw allow 6380 comment 'DAO Redis'
        sudo ufw allow 7475 comment 'DAO Neo4j HTTP'
        sudo ufw allow 7688 comment 'DAO Neo4j Bolt'
        sudo ufw allow 27018 comment 'DAO MongoDB'
        sudo ufw allow 9201 comment 'DAO Elasticsearch'
        sudo ufw allow 8083 comment 'DAO Weaviate'
        sudo ufw allow 9507 comment 'DAO DAO System DB'
        sudo ufw allow 7535 comment 'DAO Enterprise Credit DB'
        
        # åŒºå—é“¾ç‰ˆ
        sudo ufw allow 3308 comment 'Blockchain MySQL'
        sudo ufw allow 5434 comment 'Blockchain PostgreSQL'
        sudo ufw allow 5437 comment 'Blockchain AI Service DB'
        sudo ufw allow 6381 comment 'Blockchain Redis'
        sudo ufw allow 7476 comment 'Blockchain Neo4j HTTP'
        sudo ufw allow 7689 comment 'Blockchain Neo4j Bolt'
        sudo ufw allow 27019 comment 'Blockchain MongoDB'
        sudo ufw allow 9202 comment 'Blockchain Elasticsearch'
        sudo ufw allow 8084 comment 'Blockchain Weaviate'
        sudo ufw allow 9508 comment 'Blockchain DAO System DB'
        sudo ufw allow 7536 comment 'Blockchain Enterprise Credit DB'
        echo "æ‰€æœ‰ç‰ˆæœ¬é˜²ç«å¢™è§„åˆ™å·²é…ç½®"
        ;;
    "status")
        echo "å½“å‰é˜²ç«å¢™çŠ¶æ€:"
        sudo ufw status numbered
        ;;
    *)
        echo "é”™è¯¯: ä¸æ”¯æŒçš„ç‰ˆæœ¬ '$VERSION'"
        echo "æ”¯æŒçš„ç‰ˆæœ¬: future, dao, blockchain, all, status"
        exit 1
        ;;
esac

echo "é˜²ç«å¢™é…ç½®å®Œæˆ"
EOF

# è®¾ç½®æ‰§è¡Œæƒé™
chmod +x /opt/jobfirst-multi-version/scripts/firewall_manager.sh
```

### **é˜²ç«å¢™é…ç½®ä½¿ç”¨è¯´æ˜Ž**

#### **åŸºæœ¬ç”¨æ³•**
```bash
# é…ç½®Futureç‰ˆé˜²ç«å¢™
/opt/jobfirst-multi-version/scripts/firewall_manager.sh future

# é…ç½®DAOç‰ˆé˜²ç«å¢™
/opt/jobfirst-multi-version/scripts/firewall_manager.sh dao

# é…ç½®åŒºå—é“¾ç‰ˆé˜²ç«å¢™
/opt/jobfirst-multi-version/scripts/firewall_manager.sh blockchain

# é…ç½®æ‰€æœ‰ç‰ˆæœ¬é˜²ç«å¢™
/opt/jobfirst-multi-version/scripts/firewall_manager.sh all

# æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€
/opt/jobfirst-multi-version/scripts/firewall_manager.sh status
```

#### **ç‰ˆæœ¬åˆ‡æ¢æ—¶çš„é˜²ç«å¢™ç®¡ç†**
```bash
# åˆ‡æ¢åˆ°Futureç‰ˆæ—¶ï¼Œåªå¼€æ”¾Futureç‰ˆç«¯å£
./switch_to_future.sh
/opt/jobfirst-multi-version/scripts/firewall_manager.sh future

# åˆ‡æ¢åˆ°DAOç‰ˆæ—¶ï¼Œåªå¼€æ”¾DAOç‰ˆç«¯å£
./switch_to_dao.sh
/opt/jobfirst-multi-version/scripts/firewall_manager.sh dao

# åˆ‡æ¢åˆ°åŒºå—é“¾ç‰ˆæ—¶ï¼Œåªå¼€æ”¾åŒºå—é“¾ç‰ˆç«¯å£
./switch_to_blockchain.sh
/opt/jobfirst-multi-version/scripts/firewall_manager.sh blockchain
```

---

## ðŸ“‹ å¤–éƒ¨è®¿é—®ä¿¡æ¯ (ç‰ˆæœ¬åˆ‡æ¢æ¨¡å¼)

### **ç‰ˆæœ¬åˆ‡æ¢è®¿é—®åœ°å€**

#### **Futureç‰ˆå¤–éƒ¨è®¿é—®åœ°å€**

| æ•°æ®åº“ | ç«¯å£ | å¤–éƒ¨è®¿é—®åœ°å€ | ç”¨æˆ·å | å¯†ç  |
|--------|------|-------------|--------|------|
| **MySQL** | 3306 | 101.33.251.158:3306 | f_mysql_user | f_mysql_password_2025 |
| **PostgreSQL** | 5432 | 101.33.251.158:5432 | f_pg_user | f_pg_password_2025 |
| **Redis** | 6379 | 101.33.251.158:6379 | - | f_redis_password_2025 |
| **Neo4j HTTP** | 7474 | http://101.33.251.158:7474 | neo4j | f_neo4j_password_2025 |
| **Neo4j Bolt** | 7687 | bolt://101.33.251.158:7687 | neo4j | f_neo4j_password_2025 |
| **MongoDB** | 27017 | mongodb://101.33.251.158:27017 | f_mongo_admin | f_mongo_password_2025 |
| **Elasticsearch** | 9200 | http://101.33.251.158:9200 | - | - |
| **Weaviate** | 8082 | http://101.33.251.158:8082 | - | - |
| **AIæœåŠ¡æ•°æ®åº“** | 5435 | 101.33.251.158:5435 | f_ai_user | f_ai_password_2025 |
| **DAOç³»ç»Ÿæ•°æ®åº“** | 9506 | 101.33.251.158:9506 | f_dao_user | f_dao_password_2025 |
| **ä¼ä¸šä¿¡ç”¨æ•°æ®åº“** | 7534 | 101.33.251.158:7534 | f_credit_user | f_credit_password_2025 |

#### **DAOç‰ˆå¤–éƒ¨è®¿é—®åœ°å€**

| æ•°æ®åº“ | ç«¯å£ | å¤–éƒ¨è®¿é—®åœ°å€ | ç”¨æˆ·å | å¯†ç  |
|--------|------|-------------|--------|------|
| **MySQL** | 3307 | 101.33.251.158:3307 | d_mysql_user | d_mysql_password_2025 |
| **PostgreSQL** | 5433 | 101.33.251.158:5433 | d_pg_user | d_pg_password_2025 |
| **Redis** | 6380 | 101.33.251.158:6380 | - | d_redis_password_2025 |
| **Neo4j HTTP** | 7475 | http://101.33.251.158:7475 | neo4j | d_neo4j_password_2025 |
| **Neo4j Bolt** | 7688 | bolt://101.33.251.158:7688 | neo4j | d_neo4j_password_2025 |
| **MongoDB** | 27018 | mongodb://101.33.251.158:27018 | d_mongo_admin | d_mongo_password_2025 |
| **Elasticsearch** | 9201 | http://101.33.251.158:9201 | - | - |
| **Weaviate** | 8083 | http://101.33.251.158:8083 | - | - |
| **AIæœåŠ¡æ•°æ®åº“** | 5436 | 101.33.251.158:5436 | d_ai_user | d_ai_password_2025 |
| **DAOç³»ç»Ÿæ•°æ®åº“** | 9507 | 101.33.251.158:9507 | d_dao_user | d_dao_password_2025 |
| **ä¼ä¸šä¿¡ç”¨æ•°æ®åº“** | 7535 | 101.33.251.158:7535 | d_credit_user | d_credit_password_2025 |

#### **åŒºå—é“¾ç‰ˆå¤–éƒ¨è®¿é—®åœ°å€**

| æ•°æ®åº“ | ç«¯å£ | å¤–éƒ¨è®¿é—®åœ°å€ | ç”¨æˆ·å | å¯†ç  |
|--------|------|-------------|--------|------|
| **MySQL** | 3308 | 101.33.251.158:3308 | b_mysql_user | b_mysql_password_2025 |
| **PostgreSQL** | 5434 | 101.33.251.158:5434 | b_pg_user | b_pg_password_2025 |
| **Redis** | 6381 | 101.33.251.158:6381 | - | b_redis_password_2025 |
| **Neo4j HTTP** | 7476 | http://101.33.251.158:7476 | neo4j | b_neo4j_password_2025 |
| **Neo4j Bolt** | 7689 | bolt://101.33.251.158:7689 | neo4j | b_neo4j_password_2025 |
| **MongoDB** | 27019 | mongodb://101.33.251.158:27019 | b_mongo_admin | b_mongo_password_2025 |
| **Elasticsearch** | 9202 | http://101.33.251.158:9202 | - | - |
| **Weaviate** | 8084 | http://101.33.251.158:8084 | - | - |
| **AIæœåŠ¡æ•°æ®åº“** | 5437 | 101.33.251.158:5437 | b_ai_user | b_ai_password_2025 |
| **DAOç³»ç»Ÿæ•°æ®åº“** | 9508 | 101.33.251.158:9508 | b_dao_user | b_dao_password_2025 |
| **ä¼ä¸šä¿¡ç”¨æ•°æ®åº“** | 7536 | 101.33.251.158:7536 | b_credit_user | b_credit_password_2025 |

### **ç‰ˆæœ¬åˆ‡æ¢è¿žæŽ¥æµ‹è¯•**

#### **Futureç‰ˆè¿žæŽ¥æµ‹è¯•**
```bash
# MySQLè¿žæŽ¥æµ‹è¯•
mysql -h 101.33.251.158 -P 3306 -u f_mysql_user -p

# PostgreSQLè¿žæŽ¥æµ‹è¯•
psql -h 101.33.251.158 -p 5432 -U f_pg_user -d f_pg

# Redisè¿žæŽ¥æµ‹è¯•
redis-cli -h 101.33.251.158 -p 6379 -a f_redis_password_2025

# Elasticsearchè¿žæŽ¥æµ‹è¯•
curl http://101.33.251.158:9200/

# Weaviateè¿žæŽ¥æµ‹è¯•
curl http://101.33.251.158:8082/v1/meta

# Neo4j Webç•Œé¢
# è®¿é—®: http://101.33.251.158:7474
# ç”¨æˆ·å: neo4j
# å¯†ç : f_neo4j_password_2025
```

#### **DAOç‰ˆè¿žæŽ¥æµ‹è¯•**
```bash
# MySQLè¿žæŽ¥æµ‹è¯•
mysql -h 101.33.251.158 -P 3307 -u d_mysql_user -p

# PostgreSQLè¿žæŽ¥æµ‹è¯•
psql -h 101.33.251.158 -p 5433 -U d_pg_user -d d_pg

# Redisè¿žæŽ¥æµ‹è¯•
redis-cli -h 101.33.251.158 -p 6380 -a d_redis_password_2025

# Elasticsearchè¿žæŽ¥æµ‹è¯•
curl http://101.33.251.158:9201/

# Weaviateè¿žæŽ¥æµ‹è¯•
curl http://101.33.251.158:8083/v1/meta

# Neo4j Webç•Œé¢
# è®¿é—®: http://101.33.251.158:7475
# ç”¨æˆ·å: neo4j
# å¯†ç : d_neo4j_password_2025
```

#### **åŒºå—é“¾ç‰ˆè¿žæŽ¥æµ‹è¯•**
```bash
# MySQLè¿žæŽ¥æµ‹è¯•
mysql -h 101.33.251.158 -P 3308 -u b_mysql_user -p

# PostgreSQLè¿žæŽ¥æµ‹è¯•
psql -h 101.33.251.158 -p 5434 -U b_pg_user -d b_pg

# Redisè¿žæŽ¥æµ‹è¯•
redis-cli -h 101.33.251.158 -p 6381 -a b_redis_password_2025

# Elasticsearchè¿žæŽ¥æµ‹è¯•
curl http://101.33.251.158:9202/

# Weaviateè¿žæŽ¥æµ‹è¯•
curl http://101.33.251.158:8084/v1/meta

# Neo4j Webç•Œé¢
# è®¿é—®: http://101.33.251.158:7476
# ç”¨æˆ·å: neo4j
# å¯†ç : b_neo4j_password_2025
```

---

## ðŸ› ï¸ å®žé™…éƒ¨ç½²ç»éªŒæ€»ç»“ (ç‰ˆæœ¬åˆ‡æ¢æ¨¡å¼)

### **âœ… æˆåŠŸç»éªŒ**

1. **ç‰ˆæœ¬åˆ‡æ¢æž¶æž„**: é‡‡ç”¨ç‰ˆæœ¬åˆ‡æ¢æ¨¡å¼ï¼Œé¿å…èµ„æºå†²çªï¼Œæé«˜ç³»ç»Ÿç¨³å®šæ€§
2. **ç½‘ç»œé—®é¢˜è§£å†³**: ä½¿ç”¨è…¾è®¯äº‘é•œåƒæºæˆåŠŸè§£å†³Docker Hubè¿žæŽ¥è¶…æ—¶é—®é¢˜
3. **Ubuntuå®˜æ–¹ä»“åº“**: ä½¿ç”¨`docker.io`å’Œ`docker-compose`åŒ…å®‰è£…æ›´ç¨³å®š
4. **é•œåƒæºé…ç½®**: é…ç½®å¤šä¸ªé•œåƒæºç¡®ä¿ä¸‹è½½æˆåŠŸçŽ‡
5. **æ™ºèƒ½é˜²ç«å¢™**: æŒ‰ç‰ˆæœ¬åŠ¨æ€é…ç½®é˜²ç«å¢™è§„åˆ™ï¼Œæé«˜å®‰å…¨æ€§
6. **å¤–éƒ¨è®¿é—®æµ‹è¯•**: éªŒè¯æ‰€æœ‰æœåŠ¡çš„å¤–éƒ¨è®¿é—®åŠŸèƒ½
7. **è„šæœ¬åŒ–ç®¡ç†**: é€šè¿‡è„šæœ¬å®žçŽ°ç‰ˆæœ¬åˆ‡æ¢å’Œé˜²ç«å¢™ç®¡ç†ï¼Œæé«˜è¿ç»´æ•ˆçŽ‡

### **âš ï¸ æ³¨æ„äº‹é¡¹**

1. **ç‰ˆæœ¬åˆ‡æ¢é¡ºåº**: å¿…é¡»å…ˆåœæ­¢å½“å‰ç‰ˆæœ¬ï¼Œå†å¯åŠ¨ç›®æ ‡ç‰ˆæœ¬
2. **Javaç‰ˆæœ¬**: Neo4jå’ŒElasticsearchéœ€è¦Java 21ï¼Œä¸æ˜¯Java 17
3. **ç½‘ç»œè¿žæŽ¥**: è…¾è®¯äº‘æœåŠ¡å™¨ç½‘ç»œå¯èƒ½ä¸ç¨³å®šï¼Œå»ºè®®é…ç½®å¤šä¸ªé•œåƒæº
4. **ç«¯å£ç®¡ç†**: ä¸åŒç‰ˆæœ¬ä½¿ç”¨ä¸åŒç«¯å£æ®µï¼Œé¿å…å†²çª
5. **é˜²ç«å¢™é¡ºåº**: å…ˆé…ç½®é˜²ç«å¢™è§„åˆ™ï¼Œå†æµ‹è¯•å¤–éƒ¨è®¿é—®
6. **æ•°æ®æŒä¹…åŒ–**: æ‰€æœ‰æ•°æ®éƒ½å­˜å‚¨åœ¨Dockerå·ä¸­ï¼Œé‡å¯å®¹å™¨ä¸ä¼šä¸¢å¤±æ•°æ®
7. **èµ„æºç›‘æŽ§**: ç‰ˆæœ¬åˆ‡æ¢æ—¶æ³¨æ„ç›‘æŽ§ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µ

### **ðŸ”§ æ•…éšœæŽ’é™¤**

1. **ç‰ˆæœ¬åˆ‡æ¢å¤±è´¥**: æ£€æŸ¥å½“å‰ç‰ˆæœ¬çŠ¶æ€ï¼Œç¡®ä¿æ‰€æœ‰å®¹å™¨å·²åœæ­¢
2. **Dockeré•œåƒä¸‹è½½å¤±è´¥**: æ£€æŸ¥é•œåƒæºé…ç½®ï¼Œå°è¯•ä¸åŒçš„é•œåƒæº
3. **å®¹å™¨å¯åŠ¨å¤±è´¥**: æ£€æŸ¥ç«¯å£å ç”¨ï¼Œç¡®ä¿ç«¯å£æœªè¢«å…¶ä»–æœåŠ¡å ç”¨
4. **å¤–éƒ¨è®¿é—®å¤±è´¥**: æ£€æŸ¥é˜²ç«å¢™è§„åˆ™ï¼Œç¡®ä¿ç«¯å£å·²å¼€æ”¾
5. **æ•°æ®åº“è¿žæŽ¥å¤±è´¥**: æ£€æŸ¥ç”¨æˆ·åå¯†ç ï¼Œç¡®ä¿å®¹å™¨å·²å®Œå…¨å¯åŠ¨
6. **æœåŠ¡å¥åº·æ£€æŸ¥**: ä½¿ç”¨`docker ps`å’Œ`docker logs`æ£€æŸ¥å®¹å™¨çŠ¶æ€
7. **ç‰ˆæœ¬çŠ¶æ€æ··ä¹±**: ä½¿ç”¨ç‰ˆæœ¬åˆ‡æ¢è„šæœ¬é‡æ–°æ•´ç†ç‰ˆæœ¬çŠ¶æ€

### **ðŸŽ¯ ç‰ˆæœ¬åˆ‡æ¢æ¨¡å¼ä¼˜åŠ¿**

1. **èµ„æºä¼˜åŒ–**: åŒä¸€æ—¶é—´åªè¿è¡Œä¸€ä¸ªç‰ˆæœ¬ï¼Œé¿å…èµ„æºå†²çª
2. **ç®¡ç†ç®€åŒ–**: é€šè¿‡è„šæœ¬å¿«é€Ÿåˆ‡æ¢ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œ
3. **æ•°æ®éš”ç¦»**: æ¯ä¸ªç‰ˆæœ¬ä½¿ç”¨ç‹¬ç«‹çš„æ•°æ®å·å’Œç½‘ç»œ
4. **ç«¯å£ç»Ÿä¸€**: æ¯ä¸ªç‰ˆæœ¬ä½¿ç”¨ç›¸åŒçš„å†…éƒ¨ç«¯å£ï¼Œå¤–éƒ¨ç«¯å£ä¸åŒ
5. **æ•…éšœéš”ç¦»**: ä¸€ä¸ªç‰ˆæœ¬çš„é—®é¢˜ä¸ä¼šå½±å“å…¶ä»–ç‰ˆæœ¬
6. **å®‰å…¨æ€§æå‡**: åªå¼€æ”¾å½“å‰ç‰ˆæœ¬çš„ç«¯å£ï¼Œå‡å°‘å®‰å…¨é£Žé™©
7. **è¿ç»´æ•ˆçŽ‡**: è„šæœ¬åŒ–ç®¡ç†ï¼Œæé«˜è¿ç»´æ•ˆçŽ‡

---

## ðŸ“Š éƒ¨ç½²çŠ¶æ€ç›‘æŽ§ (ç‰ˆæœ¬åˆ‡æ¢æ¨¡å¼)

### **ç‰ˆæœ¬çŠ¶æ€æ£€æŸ¥**

```bash
# æ£€æŸ¥å½“å‰è¿è¡Œç‰ˆæœ¬
/opt/jobfirst-multi-version/scripts/switch_version.sh

# æ£€æŸ¥æ‰€æœ‰å®¹å™¨çŠ¶æ€
docker ps --format "table {{.Names}}\t{{.Status}}\t{{.Ports}}"

# æ£€æŸ¥é˜²ç«å¢™çŠ¶æ€
sudo ufw status numbered

# æ£€æŸ¥ç«¯å£ç›‘å¬ (æ ¹æ®å½“å‰ç‰ˆæœ¬)
netstat -tlnp | grep -E "(3306|5432|5435|6379|7474|7687|27017|9200|8082|9506|7534)"  # Futureç‰ˆ
netstat -tlnp | grep -E "(3307|5433|5436|6380|7475|7688|27018|9201|8083|9507|7535)"  # DAOç‰ˆ
netstat -tlnp | grep -E "(3308|5434|5437|6381|7476|7689|27019|9202|8084|9508|7536)"  # åŒºå—é“¾ç‰ˆ

# æ£€æŸ¥Dockerå·
docker volume ls
```

### **ç‰ˆæœ¬åˆ‡æ¢ç›‘æŽ§**

```bash
# æ£€æŸ¥æ‰€æœ‰ç‰ˆæœ¬çŠ¶æ€
echo "=== Futureç‰ˆçŠ¶æ€ ==="
cd /opt/jobfirst-multi-version/future && docker-compose ps

echo "=== DAOç‰ˆçŠ¶æ€ ==="
cd /opt/jobfirst-multi-version/dao && docker-compose ps

echo "=== åŒºå—é“¾ç‰ˆçŠ¶æ€ ==="
cd /opt/jobfirst-multi-version/blockchain && docker-compose ps
```

### **æ—¥å¿—æŸ¥çœ‹**

```bash
# æŸ¥çœ‹å½“å‰ç‰ˆæœ¬å®¹å™¨æ—¥å¿—
docker logs f-mysql      # Futureç‰ˆ
docker logs f-postgres   # Futureç‰ˆ
docker logs f-redis      # Futureç‰ˆ
docker logs f-neo4j      # Futureç‰ˆ
docker logs f-mongodb    # Futureç‰ˆ
docker logs f-elasticsearch # Futureç‰ˆ
docker logs f-weaviate   # Futureç‰ˆ

# æŸ¥çœ‹DAOç‰ˆå®¹å™¨æ—¥å¿—
docker logs d-mysql      # DAOç‰ˆ
docker logs d-postgres   # DAOç‰ˆ
docker logs d-redis      # DAOç‰ˆ
docker logs d-neo4j      # DAOç‰ˆ
docker logs d-mongodb    # DAOç‰ˆ
docker logs d-elasticsearch # DAOç‰ˆ
docker logs d-weaviate   # DAOç‰ˆ

# æŸ¥çœ‹åŒºå—é“¾ç‰ˆå®¹å™¨æ—¥å¿—
docker logs b-mysql      # åŒºå—é“¾ç‰ˆ
docker logs b-postgres   # åŒºå—é“¾ç‰ˆ
docker logs b-redis      # åŒºå—é“¾ç‰ˆ
docker logs b-neo4j      # åŒºå—é“¾ç‰ˆ
docker logs b-mongodb    # åŒºå—é“¾ç‰ˆ
docker logs b-elasticsearch # åŒºå—é“¾ç‰ˆ
docker logs b-weaviate   # åŒºå—é“¾ç‰ˆ
```

### **ç‰ˆæœ¬åˆ‡æ¢ç›‘æŽ§è„šæœ¬**

```bash
# åˆ›å»ºç‰ˆæœ¬åˆ‡æ¢ç›‘æŽ§è„šæœ¬
cat > /opt/jobfirst-multi-version/scripts/version_monitor.sh << 'EOF'
#!/bin/bash

# ç‰ˆæœ¬åˆ‡æ¢ç›‘æŽ§è„šæœ¬
# ç”¨æ³•: ./version_monitor.sh [status|health|logs]

ACTION=$1
BASE_DIR="/opt/jobfirst-multi-version"

if [ -z "$ACTION" ]; then
    echo "ç”¨æ³•: $0 [status|health|logs]"
    exit 1
fi

case $ACTION in
    "status")
        echo "=== ç‰ˆæœ¬åˆ‡æ¢çŠ¶æ€ç›‘æŽ§ ==="
        echo "å½“å‰è¿è¡Œç‰ˆæœ¬:"
        docker ps --format "table {{.Names}}\t{{.Status}}\t{{.Ports}}" | grep -E "(f-|d-|b-)"
        
        echo -e "\n=== æ‰€æœ‰ç‰ˆæœ¬çŠ¶æ€ ==="
        echo "Futureç‰ˆçŠ¶æ€:"
        cd $BASE_DIR/future && docker-compose ps 2>/dev/null || echo "Futureç‰ˆæœªè¿è¡Œ"
        
        echo -e "\nDAOç‰ˆçŠ¶æ€:"
        cd $BASE_DIR/dao && docker-compose ps 2>/dev/null || echo "DAOç‰ˆæœªè¿è¡Œ"
        
        echo -e "\nåŒºå—é“¾ç‰ˆçŠ¶æ€:"
        cd $BASE_DIR/blockchain && docker-compose ps 2>/dev/null || echo "åŒºå—é“¾ç‰ˆæœªè¿è¡Œ"
        ;;
    "health")
        echo "=== ç‰ˆæœ¬å¥åº·æ£€æŸ¥ ==="
        echo "æ£€æŸ¥å½“å‰è¿è¡Œç‰ˆæœ¬å¥åº·çŠ¶æ€..."
        
        # æ£€æŸ¥å®¹å™¨çŠ¶æ€
        docker ps --format "table {{.Names}}\t{{.Status}}\t{{.Ports}}" | grep -E "(f-|d-|b-)"
        
        # æ£€æŸ¥ç«¯å£ç›‘å¬
        echo -e "\næ£€æŸ¥ç«¯å£ç›‘å¬çŠ¶æ€:"
        netstat -tlnp | grep -E "(3306|3307|3308|5432|5433|5434|5435|5436|5437|6379|6380|6381|7474|7475|7476|7687|7688|7689|27017|27018|27019|9200|9201|9202|8082|8083|8084|9506|9507|9508|7534|7535|7536)"
        
        # æ£€æŸ¥é˜²ç«å¢™çŠ¶æ€
        echo -e "\næ£€æŸ¥é˜²ç«å¢™çŠ¶æ€:"
        sudo ufw status numbered
        ;;
    "logs")
        echo "=== ç‰ˆæœ¬æ—¥å¿—æŸ¥çœ‹ ==="
        echo "æŸ¥çœ‹å½“å‰è¿è¡Œç‰ˆæœ¬æ—¥å¿—..."
        
        # èŽ·å–å½“å‰è¿è¡Œç‰ˆæœ¬
        CURRENT_VERSION=$(docker ps --format "{{.Names}}" | grep -E "(f-|d-|b-)" | head -1 | cut -d'-' -f1)
        
        if [ -z "$CURRENT_VERSION" ]; then
            echo "æ²¡æœ‰è¿è¡Œä»»ä½•ç‰ˆæœ¬"
            exit 1
        fi
        
        echo "å½“å‰è¿è¡Œç‰ˆæœ¬: $CURRENT_VERSION"
        
        # æŸ¥çœ‹æ—¥å¿—
        case $CURRENT_VERSION in
            "f")
                echo "æŸ¥çœ‹Futureç‰ˆæ—¥å¿—..."
                docker logs f-mysql --tail 10
                docker logs f-postgres --tail 10
                docker logs f-redis --tail 10
                docker logs f-neo4j --tail 10
                docker logs f-mongodb --tail 10
                docker logs f-elasticsearch --tail 10
                docker logs f-weaviate --tail 10
                ;;
            "d")
                echo "æŸ¥çœ‹DAOç‰ˆæ—¥å¿—..."
                docker logs d-mysql --tail 10
                docker logs d-postgres --tail 10
                docker logs d-redis --tail 10
                docker logs d-neo4j --tail 10
                docker logs d-mongodb --tail 10
                docker logs d-elasticsearch --tail 10
                docker logs d-weaviate --tail 10
                ;;
            "b")
                echo "æŸ¥çœ‹åŒºå—é“¾ç‰ˆæ—¥å¿—..."
                docker logs b-mysql --tail 10
                docker logs b-postgres --tail 10
                docker logs b-redis --tail 10
                docker logs b-neo4j --tail 10
                docker logs b-mongodb --tail 10
                docker logs b-elasticsearch --tail 10
                docker logs b-weaviate --tail 10
                ;;
        esac
        ;;
    *)
        echo "é”™è¯¯: ä¸æ”¯æŒçš„æ“ä½œ '$ACTION'"
        echo "æ”¯æŒçš„æ“ä½œ: status, health, logs"
        exit 1
        ;;
esac
EOF

# è®¾ç½®æ‰§è¡Œæƒé™
chmod +x /opt/jobfirst-multi-version/scripts/version_monitor.sh
```

### **ç‰ˆæœ¬åˆ‡æ¢ç›‘æŽ§ä½¿ç”¨è¯´æ˜Ž**

```bash
# æ£€æŸ¥ç‰ˆæœ¬çŠ¶æ€
/opt/jobfirst-multi-version/scripts/version_monitor.sh status

# æ£€æŸ¥ç‰ˆæœ¬å¥åº·çŠ¶æ€
/opt/jobfirst-multi-version/scripts/version_monitor.sh health

# æŸ¥çœ‹ç‰ˆæœ¬æ—¥å¿—
/opt/jobfirst-multi-version/scripts/version_monitor.sh logs
```

---

**è…¾è®¯äº‘æ•°æ®åº“å®‰è£…å®Œæˆï¼æ‰€æœ‰æ•°æ®åº“å·²æŒ‰ç…§å‘½åè§„èŒƒè®¡åˆ’æˆåŠŸéƒ¨ç½²ï¼** ðŸš€

## ðŸŽ¯ ç‰ˆæœ¬åˆ‡æ¢æ¨¡å¼æ€»ç»“

### **æž¶æž„ä¼˜åŠ¿**
- **èµ„æºä¼˜åŒ–**: åŒä¸€æ—¶é—´åªè¿è¡Œä¸€ä¸ªç‰ˆæœ¬ï¼Œé¿å…èµ„æºå†²çª
- **ç®¡ç†ç®€åŒ–**: é€šè¿‡è„šæœ¬å¿«é€Ÿåˆ‡æ¢ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œ
- **æ•°æ®éš”ç¦»**: æ¯ä¸ªç‰ˆæœ¬ä½¿ç”¨ç‹¬ç«‹çš„æ•°æ®å·å’Œç½‘ç»œ
- **ç«¯å£ç»Ÿä¸€**: æ¯ä¸ªç‰ˆæœ¬ä½¿ç”¨ç›¸åŒçš„å†…éƒ¨ç«¯å£ï¼Œå¤–éƒ¨ç«¯å£ä¸åŒ
- **æ•…éšœéš”ç¦»**: ä¸€ä¸ªç‰ˆæœ¬çš„é—®é¢˜ä¸ä¼šå½±å“å…¶ä»–ç‰ˆæœ¬
- **å®‰å…¨æ€§æå‡**: åªå¼€æ”¾å½“å‰ç‰ˆæœ¬çš„ç«¯å£ï¼Œå‡å°‘å®‰å…¨é£Žé™©
- **è¿ç»´æ•ˆçŽ‡**: è„šæœ¬åŒ–ç®¡ç†ï¼Œæé«˜è¿ç»´æ•ˆçŽ‡

### **ç‰ˆæœ¬åˆ‡æ¢å‘½ä»¤**
```bash
# åˆ‡æ¢åˆ°Futureç‰ˆ
./switch_to_future.sh

# åˆ‡æ¢åˆ°DAOç‰ˆ
./switch_to_dao.sh

# åˆ‡æ¢åˆ°åŒºå—é“¾ç‰ˆ
./switch_to_blockchain.sh

# æŸ¥çœ‹å½“å‰ç‰ˆæœ¬
/opt/jobfirst-multi-version/scripts/switch_version.sh
```

### **ç›‘æŽ§å‘½ä»¤**
```bash
# æ£€æŸ¥ç‰ˆæœ¬çŠ¶æ€
/opt/jobfirst-multi-version/scripts/version_monitor.sh status

# æ£€æŸ¥ç‰ˆæœ¬å¥åº·çŠ¶æ€
/opt/jobfirst-multi-version/scripts/version_monitor.sh health

# æŸ¥çœ‹ç‰ˆæœ¬æ—¥å¿—
/opt/jobfirst-multi-version/scripts/version_monitor.sh logs
```

**ç‰ˆæœ¬åˆ‡æ¢æ¨¡å¼å·²æˆåŠŸå®žçŽ°ï¼** ðŸŽ‰
