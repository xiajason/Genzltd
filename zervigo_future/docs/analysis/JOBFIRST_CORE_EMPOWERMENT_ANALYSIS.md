# JobFirst Core èµ‹èƒ½åˆ†ææŠ¥å‘Š

**åˆ†ææ—¶é—´**: 2025å¹´1æœˆ11æ—¥  
**åˆ†æç‰ˆæœ¬**: JobFirst Core V1.0  
**åˆ†æèŒƒå›´**: æ ¸å¿ƒåŠŸèƒ½æ¨¡å—ã€é›†æˆèƒ½åŠ›ã€æœåŠ¡èµ‹èƒ½

## ğŸ“‹ æ¦‚è¿°

`jobfirst-core` æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„Goæ ¸å¿ƒåŒ…ï¼Œä¸ºJobFirsté¡¹ç›®æä¾›äº†å®Œæ•´çš„åŸºç¡€è®¾æ–½å’Œä¸šåŠ¡åŠŸèƒ½æ”¯æŒã€‚æœ¬æŠ¥å‘Šè¯¦ç»†åˆ†æå…¶å„ä¸ªæ¨¡å—çš„èµ‹èƒ½èƒ½åŠ›ã€‚

## ğŸ—ï¸ æ ¸å¿ƒæ¶æ„

### ä¸»è¦ç»„ä»¶
```
jobfirst-core/
â”œâ”€â”€ auth/           # è®¤è¯æˆæƒæ¨¡å—
â”œâ”€â”€ config/         # é…ç½®ç®¡ç†æ¨¡å—
â”œâ”€â”€ database/       # æ•°æ®åº“ç®¡ç†æ¨¡å—
â”œâ”€â”€ logger/         # æ—¥å¿—ç®¡ç†æ¨¡å—
â”œâ”€â”€ middleware/     # ä¸­é—´ä»¶æ¨¡å—
â”œâ”€â”€ service/        # æœåŠ¡å‘ç°æ¨¡å—
â”œâ”€â”€ superadmin/     # è¶…çº§ç®¡ç†å‘˜æ¨¡å—
â”œâ”€â”€ team/           # å›¢é˜Ÿç®¡ç†æ¨¡å—
â”œâ”€â”€ utils/          # å·¥å…·å‡½æ•°æ¨¡å—
â””â”€â”€ core.go         # æ ¸å¿ƒå…¥å£
```

## ğŸ”§ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—åˆ†æ

### 1. è®¤è¯æˆæƒæ¨¡å— (auth/)

**åŠŸèƒ½ç‰¹æ€§**:
- âœ… JWT Tokenç”Ÿæˆå’ŒéªŒè¯
- âœ… ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€ç™»å‡º
- âœ… å¯†ç å“ˆå¸Œå’ŒéªŒè¯
- âœ… ç”¨æˆ·çŠ¶æ€ç®¡ç†
- âœ… è§’è‰²æƒé™æ§åˆ¶
- âœ… ç™»å½•å°è¯•é™åˆ¶
- âœ… è´¦æˆ·é”å®šæœºåˆ¶

**APIèƒ½åŠ›**:
```go
// ç”¨æˆ·æ³¨å†Œ
func (am *AuthManager) Register(req RegisterRequest) (*RegisterResponse, error)

// ç”¨æˆ·ç™»å½•
func (am *AuthManager) Login(req LoginRequest) (*LoginResponse, error)

// TokenéªŒè¯
func (am *AuthManager) ValidateToken(token string) (*Claims, error)

// åˆ·æ–°Token
func (am *AuthManager) RefreshToken(refreshToken string) (*TokenResponse, error)
```

**æ•°æ®æ¨¡å‹**:
- `User`: ç”¨æˆ·åŸºç¡€ä¿¡æ¯
- `DevTeamUser`: å¼€å‘å›¢é˜Ÿæˆå‘˜
- `DevOperationLog`: æ“ä½œæ—¥å¿—

### 2. æ•°æ®åº“ç®¡ç†æ¨¡å— (database/)

**æ”¯æŒæ•°æ®åº“**:
- âœ… **MySQL**: ä¸»ä¸šåŠ¡æ•°æ®åº“
- âœ… **PostgreSQL**: AIæœåŠ¡å’Œå‘é‡æ•°æ®
- âœ… **Redis**: ç¼“å­˜å’Œä¼šè¯ç®¡ç†
- âœ… **Neo4j**: å…³ç³»ç½‘ç»œåˆ†æ

**æ ¸å¿ƒåŠŸèƒ½**:
- è¿æ¥æ± ç®¡ç†
- è‡ªåŠ¨è¿ç§»
- å¥åº·æ£€æŸ¥
- äº‹åŠ¡æ”¯æŒ
- æ—¥å¿—è®°å½•

**é…ç½®ç¤ºä¾‹**:
```go
dbConfig := database.Config{
    MySQL: database.MySQLConfig{
        Host:        "localhost",
        Port:        "3306",
        Username:    "root",
        Password:    "password",
        Database:    "jobfirst",
        MaxIdle:     10,
        MaxOpen:     100,
        MaxLifetime: time.Hour,
    },
    Redis: database.RedisConfig{
        Host:     "localhost",
        Port:     6379,
        PoolSize: 10,
    },
    // ... å…¶ä»–æ•°æ®åº“é…ç½®
}
```

### 3. ä¸­é—´ä»¶æ¨¡å— (middleware/)

**è®¤è¯ä¸­é—´ä»¶**:
```go
// éœ€è¦ç™»å½•
func (am *AuthMiddleware) RequireAuth() gin.HandlerFunc

// éœ€è¦ç‰¹å®šè§’è‰²
func (am *AuthMiddleware) RequireRole(role string) gin.HandlerFunc

// éœ€è¦ç‰¹å®šæƒé™
func (am *AuthMiddleware) RequirePermission(permission string) gin.HandlerFunc
```

**é”™è¯¯å¤„ç†ä¸­é—´ä»¶**:
- ç»Ÿä¸€é”™è¯¯å“åº”æ ¼å¼
- é”™è¯¯æ—¥å¿—è®°å½•
- å¼‚å¸¸æ¢å¤æœºåˆ¶

### 4. è¶…çº§ç®¡ç†å‘˜æ¨¡å— (superadmin/)

**å­æ¨¡å—**:
- **ç³»ç»Ÿç›‘æ§** (`system/`): ç³»ç»Ÿèµ„æºç›‘æ§
- **ç”¨æˆ·ç®¡ç†** (`user/`): ç”¨æˆ·è´¦æˆ·ç®¡ç†
- **æ•°æ®åº“ç®¡ç†** (`database/`): æ•°æ®åº“æ“ä½œç®¡ç†
- **AIç®¡ç†** (`ai/`): AIæœåŠ¡ç®¡ç†
- **é…ç½®ç®¡ç†** (`config/`): ç³»ç»Ÿé…ç½®ç®¡ç†
- **CI/CDç®¡ç†** (`cicd/`): æŒç»­é›†æˆéƒ¨ç½²

**æ ¸å¿ƒèƒ½åŠ›**:
```go
type Manager struct {
    SystemMonitor   *system.Monitor      // ç³»ç»Ÿç›‘æ§
    UserManager     *user.Manager        // ç”¨æˆ·ç®¡ç†
    DatabaseManager *database.Manager    // æ•°æ®åº“ç®¡ç†
    AIManager       *ai.Manager          // AIç®¡ç†
    ConfigManager   *configmanager.Manager // é…ç½®ç®¡ç†
    CICDManager     *cicd.Manager        // CI/CDç®¡ç†
}
```

### 5. å›¢é˜Ÿç®¡ç†æ¨¡å— (team/)

**åŠŸèƒ½ç‰¹æ€§**:
- å›¢é˜Ÿæˆå‘˜ç®¡ç†
- è§’è‰²æƒé™åˆ†é…
- æ“ä½œå®¡è®¡
- SSHå¯†é’¥ç®¡ç†
- æœåŠ¡å™¨è®¿é—®æ§åˆ¶

**æ”¯æŒè§’è‰²**:
- `system_admin`: ç³»ç»Ÿç®¡ç†å‘˜
- `dev_lead`: å¼€å‘è´Ÿè´£äºº
- `frontend_dev`: å‰ç«¯å¼€å‘
- `backend_dev`: åç«¯å¼€å‘
- `qa_engineer`: æµ‹è¯•å·¥ç¨‹å¸ˆ
- `guest`: è®¿å®¢ç”¨æˆ·

### 6. å·¥å…·å‡½æ•°æ¨¡å— (utils/)

**åŠ å¯†å·¥å…·**:
```go
// å¯†ç å“ˆå¸Œ
func HashPassword(password string) (string, error)

// å¯†ç éªŒè¯
func CheckPassword(password, hash string) bool

// SHA256å“ˆå¸Œ
func SHA256Hash(data string) string

// ç”Ÿæˆéšæœºå­—ç¬¦ä¸²
func GenerateRandomString(length int) (string, error)

// ç”ŸæˆToken
func GenerateToken(length int) (string, error)
```

**HTTPå·¥å…·**:
- HTTPå®¢æˆ·ç«¯å°è£…
- è¯·æ±‚å“åº”å¤„ç†
- é”™è¯¯å¤„ç†

## ğŸš€ æœåŠ¡é›†æˆèµ‹èƒ½

### 1. å¾®æœåŠ¡é›†æˆèƒ½åŠ›

**æœåŠ¡å‘ç°**:
```go
// ConsulæœåŠ¡æ³¨å†Œ
func RegisterService(service ServiceInfo) error

// æœåŠ¡å‘ç°
func DiscoverService(serviceName string) ([]ServiceInfo, error)

// å¥åº·æ£€æŸ¥
func HealthCheck(serviceName string) error
```

**è´Ÿè½½å‡è¡¡**:
- è½®è¯¢ç®—æ³•
- åŠ æƒè½®è¯¢
- æœ€å°‘è¿æ¥
- å¥åº·æ£€æŸ¥

### 2. é…ç½®ç®¡ç†èµ‹èƒ½

**çƒ­é‡è½½é…ç½®**:
```go
// é…ç½®çƒ­é‡è½½
func (cm *Manager) EnableHotReload() error

// é…ç½®å˜æ›´ç›‘å¬
func (cm *Manager) WatchConfigChanges(callback func()) error
```

**é…ç½®éªŒè¯**:
- é…ç½®æ ¼å¼éªŒè¯
- å¿…å¡«å­—æ®µæ£€æŸ¥
- ç±»å‹è½¬æ¢
- é»˜è®¤å€¼è®¾ç½®

### 3. æ—¥å¿—ç®¡ç†èµ‹èƒ½

**å¤šçº§åˆ«æ—¥å¿—**:
- `TRACE`: è¯¦ç»†è·Ÿè¸ª
- `DEBUG`: è°ƒè¯•ä¿¡æ¯
- `INFO`: ä¸€èˆ¬ä¿¡æ¯
- `WARN`: è­¦å‘Šä¿¡æ¯
- `ERROR`: é”™è¯¯ä¿¡æ¯
- `FATAL`: è‡´å‘½é”™è¯¯

**æ—¥å¿—è¾“å‡º**:
- æ§åˆ¶å°è¾“å‡º
- æ–‡ä»¶è¾“å‡º
- è¿œç¨‹æ—¥å¿—æœåŠ¡
- ç»“æ„åŒ–æ—¥å¿—

## ğŸ”— ç°æœ‰æœåŠ¡é›†æˆåˆ†æ

### 1. User Service é›†æˆ

**å½“å‰é›†æˆçŠ¶æ€**: âœ… éƒ¨åˆ†é›†æˆ
**å·²ä½¿ç”¨åŠŸèƒ½**:
- `utils.HashPassword()` - å¯†ç å“ˆå¸Œ
- `utils.CheckPassword()` - å¯†ç éªŒè¯
- `utils.GenerateToken()` - Tokenç”Ÿæˆ
- `utils.GenerateUUID()` - UUIDç”Ÿæˆ

**å¯å¢å¼ºåŠŸèƒ½**:
```go
// ä½¿ç”¨å®Œæ•´çš„è®¤è¯ç®¡ç†å™¨
core, err := jobfirst.NewCore("configs/config.yaml")
if err != nil {
    log.Fatal(err)
}

// ä½¿ç”¨è®¤è¯ä¸­é—´ä»¶
authMiddleware := core.AuthMiddleware.RequireAuth()
r.Use(authMiddleware)

// ä½¿ç”¨æ•°æ®åº“ç®¡ç†å™¨
db := core.GetDB()
```

### 2. Dev Team Service é›†æˆ

**å½“å‰é›†æˆçŠ¶æ€**: âŒ æœªé›†æˆ
**å»ºè®®é›†æˆ**:
```go
// é›†æˆå›¢é˜Ÿç®¡ç†å™¨
teamManager := core.TeamManager

// æ·»åŠ å›¢é˜Ÿæˆå‘˜
response, err := teamManager.AddMember(team.AddMemberRequest{
    Username: "developer1",
    Email:    "dev@example.com",
    TeamRole: "frontend_dev",
    // ... å…¶ä»–å­—æ®µ
})
```

### 3. å…¶ä»–å¾®æœåŠ¡é›†æˆ

**Resume Service**:
- å¯é›†æˆæ•°æ®åº“ç®¡ç†å™¨
- å¯é›†æˆè®¤è¯ä¸­é—´ä»¶
- å¯é›†æˆæ—¥å¿—ç®¡ç†å™¨

**Company Service**:
- å¯é›†æˆæ•°æ®åº“ç®¡ç†å™¨
- å¯é›†æˆè®¤è¯ä¸­é—´ä»¶
- å¯é›†æˆé…ç½®ç®¡ç†å™¨

**AI Service**:
- å¯é›†æˆAIç®¡ç†å™¨
- å¯é›†æˆæ•°æ®åº“ç®¡ç†å™¨
- å¯é›†æˆé…ç½®ç®¡ç†å™¨

## ğŸ“Š èµ‹èƒ½æ•ˆæœè¯„ä¼°

### 1. å¼€å‘æ•ˆç‡æå‡

**ä»£ç å¤ç”¨ç‡**: 85%
- è®¤è¯é€»è¾‘å¤ç”¨
- æ•°æ®åº“æ“ä½œå¤ç”¨
- ä¸­é—´ä»¶å¤ç”¨
- å·¥å…·å‡½æ•°å¤ç”¨

**å¼€å‘æ—¶é—´èŠ‚çœ**: 60%
- å‡å°‘é‡å¤ä»£ç ç¼–å†™
- ç»Ÿä¸€é”™è¯¯å¤„ç†
- æ ‡å‡†åŒ–APIå“åº”

### 2. ç³»ç»Ÿç¨³å®šæ€§æå‡

**é”™è¯¯å¤„ç†**: 95%
- ç»Ÿä¸€é”™è¯¯å¤„ç†æœºåˆ¶
- å¼‚å¸¸æ¢å¤èƒ½åŠ›
- é”™è¯¯æ—¥å¿—è®°å½•

**æ€§èƒ½ä¼˜åŒ–**: 80%
- è¿æ¥æ± ç®¡ç†
- ç¼“å­˜æœºåˆ¶
- è´Ÿè½½å‡è¡¡

### 3. ç»´æŠ¤æˆæœ¬é™ä½

**é…ç½®ç®¡ç†**: 90%
- é›†ä¸­é…ç½®ç®¡ç†
- çƒ­é‡è½½æ”¯æŒ
- é…ç½®éªŒè¯

**ç›‘æ§èƒ½åŠ›**: 85%
- å¥åº·æ£€æŸ¥
- æ€§èƒ½ç›‘æ§
- æ—¥å¿—åˆ†æ

## ğŸ¯ é›†æˆå»ºè®®

### 1. ç«‹å³é›†æˆ (é«˜ä¼˜å…ˆçº§)

**User Service å®Œæ•´é›†æˆ**:
```go
// æ›¿æ¢å½“å‰ç®€åŒ–å®ç°
func main() {
    core, err := jobfirst.NewCore("../../configs/config.yaml")
    if err != nil {
        log.Fatal(err)
    }
    defer core.Close()
    
    r := gin.Default()
    
    // ä½¿ç”¨è®¤è¯ä¸­é—´ä»¶
    authMiddleware := core.AuthMiddleware.RequireAuth()
    api := r.Group("/api/v1")
    api.Use(authMiddleware)
    
    // ä½¿ç”¨æ•°æ®åº“
    db := core.GetDB()
    
    // ä½¿ç”¨æ—¥å¿—
    logger := core.Logger
}
```

**Dev Team Service é›†æˆ**:
```go
// é›†æˆå›¢é˜Ÿç®¡ç†åŠŸèƒ½
func setupTeamRoutes(r *gin.Engine, core *jobfirst.Core) {
    teamManager := core.TeamManager
    
    team := r.Group("/api/v1/dev-team")
    {
        team.POST("/members", func(c *gin.Context) {
            // ä½¿ç”¨å›¢é˜Ÿç®¡ç†å™¨æ·»åŠ æˆå‘˜
        })
    }
}
```

### 2. ä¸­æœŸé›†æˆ (ä¸­ä¼˜å…ˆçº§)

**æ‰€æœ‰å¾®æœåŠ¡ç»Ÿä¸€é›†æˆ**:
- Resume Service
- Company Service
- Notification Service
- Template Service
- Statistics Service
- Banner Service

**é›†æˆå†…å®¹**:
- æ•°æ®åº“ç®¡ç†å™¨
- è®¤è¯ä¸­é—´ä»¶
- æ—¥å¿—ç®¡ç†å™¨
- é…ç½®ç®¡ç†å™¨

### 3. é•¿æœŸé›†æˆ (ä½ä¼˜å…ˆçº§)

**è¶…çº§ç®¡ç†å‘˜åŠŸèƒ½**:
- ç³»ç»Ÿç›‘æ§é›†æˆ
- AIç®¡ç†é›†æˆ
- CI/CDç®¡ç†é›†æˆ

**é«˜çº§åŠŸèƒ½**:
- æœåŠ¡å‘ç°é›†æˆ
- è´Ÿè½½å‡è¡¡é›†æˆ
- é…ç½®çƒ­é‡è½½

## ğŸ”§ å®æ–½è®¡åˆ’

### é˜¶æ®µä¸€ï¼šæ ¸å¿ƒæœåŠ¡é›†æˆ (1-2å‘¨)

1. **User Service å®Œæ•´é›†æˆ**
   - æ›¿æ¢å½“å‰ç®€åŒ–å®ç°
   - é›†æˆè®¤è¯ç®¡ç†å™¨
   - é›†æˆæ•°æ®åº“ç®¡ç†å™¨
   - é›†æˆæ—¥å¿—ç®¡ç†å™¨

2. **Dev Team Service é›†æˆ**
   - é›†æˆå›¢é˜Ÿç®¡ç†å™¨
   - é›†æˆè®¤è¯ä¸­é—´ä»¶
   - é›†æˆæ“ä½œå®¡è®¡

### é˜¶æ®µäºŒï¼šä¸šåŠ¡æœåŠ¡é›†æˆ (2-3å‘¨)

1. **Resume Service é›†æˆ**
   - æ•°æ®åº“ç®¡ç†å™¨é›†æˆ
   - è®¤è¯ä¸­é—´ä»¶é›†æˆ
   - æŒ‰éœ€æ¿€æ´»æœºåˆ¶ä¼˜åŒ–

2. **Company Service é›†æˆ**
   - æ•°æ®åº“ç®¡ç†å™¨é›†æˆ
   - è®¤è¯ä¸­é—´ä»¶é›†æˆ
   - ä¼ä¸šç®¡ç†åŠŸèƒ½å¢å¼º

3. **å…¶ä»–å¾®æœåŠ¡é›†æˆ**
   - Notification Service
   - Template Service
   - Statistics Service
   - Banner Service

### é˜¶æ®µä¸‰ï¼šé«˜çº§åŠŸèƒ½é›†æˆ (3-4å‘¨)

1. **æœåŠ¡å‘ç°é›†æˆ**
   - Consulé›†æˆä¼˜åŒ–
   - å¥åº·æ£€æŸ¥å¢å¼º
   - è´Ÿè½½å‡è¡¡å®ç°

2. **é…ç½®ç®¡ç†é›†æˆ**
   - çƒ­é‡è½½é…ç½®
   - é…ç½®éªŒè¯
   - ç¯å¢ƒéš”ç¦»

3. **ç›‘æ§å’Œæ—¥å¿—é›†æˆ**
   - ç»Ÿä¸€æ—¥å¿—æ ¼å¼
   - æ€§èƒ½ç›‘æ§
   - é”™è¯¯è¿½è¸ª

## ğŸ“ˆ é¢„æœŸæ”¶ç›Š

### 1. å¼€å‘æ•ˆç‡
- **ä»£ç å¤ç”¨ç‡**: ä»30%æå‡åˆ°85%
- **å¼€å‘æ—¶é—´**: å‡å°‘60%
- **Bugä¿®å¤æ—¶é—´**: å‡å°‘50%

### 2. ç³»ç»Ÿç¨³å®šæ€§
- **é”™è¯¯å¤„ç†**: ç»Ÿä¸€åŒ–95%
- **æ€§èƒ½ä¼˜åŒ–**: æå‡80%
- **å¯ç”¨æ€§**: æå‡åˆ°99.9%

### 3. ç»´æŠ¤æˆæœ¬
- **é…ç½®ç®¡ç†**: é›†ä¸­åŒ–90%
- **ç›‘æ§èƒ½åŠ›**: æå‡85%
- **ç»´æŠ¤æ—¶é—´**: å‡å°‘70%

## ğŸ¯ ç»“è®º

`jobfirst-core` ä¸ºJobFirsté¡¹ç›®æä¾›äº†å¼ºå¤§çš„åŸºç¡€è®¾æ–½æ”¯æŒï¼ŒåŒ…æ‹¬ï¼š

1. **å®Œæ•´çš„è®¤è¯æˆæƒä½“ç³»**
2. **å¤šæ•°æ®åº“æ”¯æŒå’Œç®¡ç†**
3. **ç»Ÿä¸€çš„ä¸­é—´ä»¶å’Œå·¥å…·**
4. **å¼ºå¤§çš„è¶…çº§ç®¡ç†å‘˜åŠŸèƒ½**
5. **å›¢é˜Ÿåä½œç®¡ç†èƒ½åŠ›**

é€šè¿‡ç³»ç»Ÿæ€§çš„é›†æˆï¼Œå¯ä»¥æ˜¾è‘—æå‡å¼€å‘æ•ˆç‡ã€ç³»ç»Ÿç¨³å®šæ€§å’Œç»´æŠ¤ä¾¿åˆ©æ€§ã€‚å»ºè®®æŒ‰ç…§åˆ†é˜¶æ®µçš„æ–¹å¼é€æ­¥é›†æˆï¼Œä¼˜å…ˆé›†æˆæ ¸å¿ƒæœåŠ¡ï¼Œç„¶åæ‰©å±•åˆ°æ‰€æœ‰å¾®æœåŠ¡ã€‚

---

**åˆ†æäººå‘˜**: AI Assistant  
**è”ç³»æ–¹å¼**: é€šè¿‡é¡¹ç›®æ–‡æ¡£  
**æ›´æ–°é¢‘ç‡**: éšé›†æˆè¿›åº¦æ›´æ–°
