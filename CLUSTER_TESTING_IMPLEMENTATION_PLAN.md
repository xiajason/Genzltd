# é›†ç¾¤åŒ–æµ‹è¯•å®ç°æ–¹æ¡ˆ

## ğŸ“‹ æ¦‚è¿°

åŸºäºæˆ‘ä»¬å½“å‰çš„ä¸‰ç¯å¢ƒæ¶æ„æˆæœï¼ˆæœ¬åœ°åŒ–éƒ¨ç½²+é˜¿é‡Œäº‘éƒ¨ç½²+è…¾è®¯äº‘éƒ¨ç½²ï¼‰ï¼Œè®¾è®¡ä¸€ä¸ªå®Œæ•´çš„é›†ç¾¤åŒ–æµ‹è¯•æ–¹æ¡ˆï¼ŒéªŒè¯å¾®æœåŠ¡é›†ç¾¤çš„é«˜å¯ç”¨æ€§ã€è´Ÿè½½å‡è¡¡ã€æ•…éšœè½¬ç§»ç­‰å…³é”®èƒ½åŠ›ã€‚

## ğŸ—ï¸ å½“å‰æ¶æ„åŸºç¡€

### âœ… ä¸‰ç¯å¢ƒæ¶æ„æˆæœ
- **æœ¬åœ°å¼€å‘ç¯å¢ƒ**: 29ä¸ªå®¹å™¨æœåŠ¡ âœ… 100%å¯ç”¨
- **è…¾è®¯äº‘æµ‹è¯•ç¯å¢ƒ**: 4ä¸ªå®¹å™¨æœåŠ¡ âœ… 100%å¯ç”¨  
- **é˜¿é‡Œäº‘ç”Ÿäº§ç¯å¢ƒ**: 7ä¸ªå®¹å™¨æœåŠ¡ âœ… 100%å¯ç”¨
- **æ€»è®¡**: 40ä¸ªå®¹å™¨æœåŠ¡ï¼Œä¸‰ç¯å¢ƒæ¶æ„å®Œå…¨æˆåŠŸ

### âœ… ç°æœ‰é›†ç¾¤åŸºç¡€è®¾æ–½
- **é›†ç¾¤é…ç½®**: `zervigo_future/backend/configs/cluster-config.yaml`
- **é›†ç¾¤ç®¡ç†**: `zervigo_future/backend/configs/cluster-manager-config.yaml`
- **è´Ÿè½½å‡è¡¡**: å·²å®ç°è½®è¯¢ã€éšæœºã€æƒé‡ç­‰ç®—æ³•
- **å¥åº·æ£€æŸ¥**: å·²å®ç°èŠ‚ç‚¹å¥åº·ç›‘æ§
- **æµ‹è¯•æŠ¥å‘Š**: å·²æœ‰è´Ÿè½½å‡è¡¡æµ‹è¯•æŠ¥å‘Š

## ğŸ¯ é›†ç¾¤åŒ–æµ‹è¯•ç›®æ ‡

### 1. è·¨ç¯å¢ƒé›†ç¾¤æµ‹è¯•
- **æœ¬åœ°é›†ç¾¤**: æ¨¡æ‹Ÿå¤šèŠ‚ç‚¹è´Ÿè½½å‡è¡¡
- **äº‘ç«¯é›†ç¾¤**: éªŒè¯äº‘ç¯å¢ƒä¸‹çš„é›†ç¾¤ç¨³å®šæ€§
- **æ··åˆé›†ç¾¤**: æœ¬åœ°+äº‘ç«¯æ··åˆéƒ¨ç½²æµ‹è¯•

### 2. é«˜å¯ç”¨æ€§æµ‹è¯•
- **æ•…éšœè½¬ç§»**: èŠ‚ç‚¹æ•…éšœæ—¶çš„è‡ªåŠ¨åˆ‡æ¢
- **æœåŠ¡æ¢å¤**: æ•…éšœèŠ‚ç‚¹æ¢å¤åçš„é‡æ–°åŠ å…¥
- **æ•°æ®ä¸€è‡´æ€§**: é›†ç¾¤èŠ‚ç‚¹é—´çš„æ•°æ®åŒæ­¥

### 3. è´Ÿè½½å‡è¡¡æµ‹è¯•
- **ç®—æ³•éªŒè¯**: è½®è¯¢ã€éšæœºã€æƒé‡ã€æœ€å°‘è¿æ¥ç­‰
- **æ€§èƒ½æµ‹è¯•**: é«˜å¹¶å‘ä¸‹çš„è´Ÿè½½åˆ†é…
- **åŠ¨æ€è°ƒæ•´**: èŠ‚ç‚¹æƒé‡åŠ¨æ€è°ƒæ•´

### 4. æœåŠ¡å‘ç°æµ‹è¯•
- **æ³¨å†Œå‘ç°**: æœåŠ¡è‡ªåŠ¨æ³¨å†Œå’Œå‘ç°
- **å¥åº·æ£€æŸ¥**: æœåŠ¡å¥åº·çŠ¶æ€ç›‘æ§
- **é…ç½®åŒæ­¥**: é›†ç¾¤é…ç½®åŠ¨æ€æ›´æ–°

## ğŸš€ é›†ç¾¤åŒ–æµ‹è¯•å®æ–½æ–¹æ¡ˆ

### ç¬¬ä¸€é˜¶æ®µï¼šæœ¬åœ°é›†ç¾¤æµ‹è¯• (1-2å¤©)

#### 1.1 æœ¬åœ°å¤šèŠ‚ç‚¹é›†ç¾¤éƒ¨ç½²
```yaml
æœ¬åœ°é›†ç¾¤é…ç½®:
  API Gatewayé›†ç¾¤:
    - èŠ‚ç‚¹1: localhost:8080 (ä¸»èŠ‚ç‚¹)
    - èŠ‚ç‚¹2: localhost:8081 (é›†ç¾¤èŠ‚ç‚¹)
    - èŠ‚ç‚¹3: localhost:8082 (é›†ç¾¤èŠ‚ç‚¹)
  
  ç”¨æˆ·æœåŠ¡é›†ç¾¤:
    - èŠ‚ç‚¹1: localhost:8083 (ä¸»èŠ‚ç‚¹)
    - èŠ‚ç‚¹2: localhost:8084 (é›†ç¾¤èŠ‚ç‚¹)
    - èŠ‚ç‚¹3: localhost:8085 (é›†ç¾¤èŠ‚ç‚¹)
  
  åŒºå—é“¾æœåŠ¡é›†ç¾¤:
    - èŠ‚ç‚¹1: localhost:8091 (ä¸»èŠ‚ç‚¹)
    - èŠ‚ç‚¹2: localhost:8092 (é›†ç¾¤èŠ‚ç‚¹)
    - èŠ‚ç‚¹3: localhost:8093 (é›†ç¾¤èŠ‚ç‚¹)
```

#### 1.2 é›†ç¾¤å¯åŠ¨è„šæœ¬
```bash
#!/bin/bash
# start-cluster-test.sh

echo "ğŸš€ å¯åŠ¨æœ¬åœ°é›†ç¾¤æµ‹è¯•ç¯å¢ƒ..."

# å¯åŠ¨åŸºç¡€è®¾æ–½
start_infrastructure() {
    echo "ğŸ“¦ å¯åŠ¨åŸºç¡€è®¾æ–½æœåŠ¡..."
    docker-compose up -d mysql redis postgresql neo4j consul
    sleep 10
}

# å¯åŠ¨API Gatewayé›†ç¾¤
start_api_gateway_cluster() {
    echo "ğŸŒ å¯åŠ¨API Gatewayé›†ç¾¤..."
    
    # èŠ‚ç‚¹1 (ä¸»èŠ‚ç‚¹)
    cd zervigo_future/backend/cmd/basic-server
    SERVER_PORT=8080 NODE_ID=basic-server-node-1 air &
    
    # èŠ‚ç‚¹2 (é›†ç¾¤èŠ‚ç‚¹)
    SERVER_PORT=8081 NODE_ID=basic-server-node-2 air &
    
    # èŠ‚ç‚¹3 (é›†ç¾¤èŠ‚ç‚¹)
    SERVER_PORT=8082 NODE_ID=basic-server-node-3 air &
    
    sleep 5
}

# å¯åŠ¨ç”¨æˆ·æœåŠ¡é›†ç¾¤
start_user_service_cluster() {
    echo "ğŸ‘¥ å¯åŠ¨ç”¨æˆ·æœåŠ¡é›†ç¾¤..."
    
    # èŠ‚ç‚¹1 (ä¸»èŠ‚ç‚¹)
    cd zervigo_future/backend/cmd/user-service
    SERVER_PORT=8083 NODE_ID=user-service-node-1 air &
    
    # èŠ‚ç‚¹2 (é›†ç¾¤èŠ‚ç‚¹)
    SERVER_PORT=8084 NODE_ID=user-service-node-2 air &
    
    # èŠ‚ç‚¹3 (é›†ç¾¤èŠ‚ç‚¹)
    SERVER_PORT=8085 NODE_ID=user-service-node-3 air &
    
    sleep 5
}

# å¯åŠ¨åŒºå—é“¾æœåŠ¡é›†ç¾¤
start_blockchain_cluster() {
    echo "â›“ï¸ å¯åŠ¨åŒºå—é“¾æœåŠ¡é›†ç¾¤..."
    
    # èŠ‚ç‚¹1 (ä¸»èŠ‚ç‚¹)
    cd zervigo_future/backend/cmd/blockchain-service
    SERVER_PORT=8091 NODE_ID=blockchain-service-node-1 air &
    
    # èŠ‚ç‚¹2 (é›†ç¾¤èŠ‚ç‚¹)
    SERVER_PORT=8092 NODE_ID=blockchain-service-node-2 air &
    
    # èŠ‚ç‚¹3 (é›†ç¾¤èŠ‚ç‚¹)
    SERVER_PORT=8093 NODE_ID=blockchain-service-node-3 air &
    
    sleep 5
}

# å¯åŠ¨é›†ç¾¤ç®¡ç†æœåŠ¡
start_cluster_manager() {
    echo "ğŸ›ï¸ å¯åŠ¨é›†ç¾¤ç®¡ç†æœåŠ¡..."
    cd zervigo_future/backend/cmd/cluster-manager
    air &
}

# ä¸»å¯åŠ¨å‡½æ•°
main() {
    echo "ğŸ¯ å¯åŠ¨æœ¬åœ°é›†ç¾¤æµ‹è¯•ç¯å¢ƒ (9ä¸ªé›†ç¾¤èŠ‚ç‚¹)"
    
    start_infrastructure
    start_api_gateway_cluster
    start_user_service_cluster
    start_blockchain_cluster
    start_cluster_manager
    
    echo "âœ… é›†ç¾¤ç¯å¢ƒå¯åŠ¨å®Œæˆï¼"
    echo "ğŸ“Š é›†ç¾¤ç®¡ç†ç•Œé¢: http://localhost:9091"
    echo "ğŸŒ API Gateway: http://localhost:8080"
    echo "ğŸ“ˆ ç›‘æ§é¢æ¿: http://localhost:3000"
}

main "$@"
```

#### 1.3 é›†ç¾¤æµ‹è¯•è„šæœ¬
```bash
#!/bin/bash
# cluster-test.sh

echo "ğŸ§ª å¼€å§‹é›†ç¾¤åŒ–æµ‹è¯•..."

# æµ‹è¯•é…ç½®
API_GATEWAY_CLUSTER=("localhost:8080" "localhost:8081" "localhost:8082")
USER_SERVICE_CLUSTER=("localhost:8083" "localhost:8084" "localhost:8085")
BLOCKCHAIN_CLUSTER=("localhost:8091" "localhost:8092" "localhost:8093")

# è´Ÿè½½å‡è¡¡æµ‹è¯•
test_load_balancing() {
    echo "âš–ï¸ æµ‹è¯•è´Ÿè½½å‡è¡¡..."
    
    local service_name=$1
    local cluster_nodes=("${@:2}")
    local total_requests=100
    
    echo "æµ‹è¯•æœåŠ¡: $service_name"
    echo "é›†ç¾¤èŠ‚ç‚¹: ${cluster_nodes[*]}"
    
    # ç»Ÿè®¡æ¯ä¸ªèŠ‚ç‚¹çš„è¯·æ±‚æ•°
    declare -A node_requests
    for node in "${cluster_nodes[@]}"; do
        node_requests[$node]=0
    done
    
    # å‘é€æµ‹è¯•è¯·æ±‚
    for ((i=1; i<=total_requests; i++)); do
        # æ¨¡æ‹Ÿè´Ÿè½½å‡è¡¡å™¨é€‰æ‹©èŠ‚ç‚¹
        node_index=$((i % ${#cluster_nodes[@]}))
        selected_node=${cluster_nodes[$node_index]}
        
        # å‘é€è¯·æ±‚
        response=$(curl -s -w "%{http_code}" -o /dev/null "http://$selected_node/health")
        if [ "$response" = "200" ]; then
            ((node_requests[$selected_node]++))
        fi
        
        sleep 0.1
    done
    
    # è¾“å‡ºç»“æœ
    echo "è´Ÿè½½å‡è¡¡æµ‹è¯•ç»“æœ:"
    for node in "${cluster_nodes[@]}"; do
        requests=${node_requests[$node]}
        percentage=$((requests * 100 / total_requests))
        echo "  $node: $requests è¯·æ±‚ ($percentage%)"
    done
}

# æ•…éšœè½¬ç§»æµ‹è¯•
test_failover() {
    echo "ğŸ”„ æµ‹è¯•æ•…éšœè½¬ç§»..."
    
    local service_name=$1
    local cluster_nodes=("${@:2}")
    local primary_node=${cluster_nodes[0]}
    
    echo "æµ‹è¯•æœåŠ¡: $service_name"
    echo "ä¸»èŠ‚ç‚¹: $primary_node"
    
    # è®°å½•æ•…éšœå‰çš„çŠ¶æ€
    echo "æ•…éšœå‰çŠ¶æ€æ£€æŸ¥..."
    for node in "${cluster_nodes[@]}"; do
        status=$(curl -s "http://$node/health" | jq -r '.status // "unknown"')
        echo "  $node: $status"
    done
    
    # æ¨¡æ‹Ÿä¸»èŠ‚ç‚¹æ•…éšœ
    echo "æ¨¡æ‹Ÿä¸»èŠ‚ç‚¹æ•…éšœ: $primary_node"
    # è¿™é‡Œå¯ä»¥é€šè¿‡åœæ­¢æœåŠ¡æˆ–ç½‘ç»œéš”ç¦»æ¥æ¨¡æ‹Ÿæ•…éšœ
    
    # ç­‰å¾…æ•…éšœè½¬ç§»
    sleep 5
    
    # æ£€æŸ¥æ•…éšœè½¬ç§»ç»“æœ
    echo "æ•…éšœè½¬ç§»åçŠ¶æ€æ£€æŸ¥..."
    for node in "${cluster_nodes[@]}"; do
        if [ "$node" != "$primary_node" ]; then
            status=$(curl -s "http://$node/health" | jq -r '.status // "unknown"')
            echo "  $node: $status"
        fi
    done
}

# å¹¶å‘æµ‹è¯•
test_concurrency() {
    echo "ğŸš€ æµ‹è¯•å¹¶å‘æ€§èƒ½..."
    
    local service_name=$1
    local cluster_nodes=("${@:2}")
    local concurrent_users=50
    local requests_per_user=20
    
    echo "æµ‹è¯•æœåŠ¡: $service_name"
    echo "å¹¶å‘ç”¨æˆ·: $concurrent_users"
    echo "æ¯ç”¨æˆ·è¯·æ±‚æ•°: $requests_per_user"
    
    # ä½¿ç”¨å¹¶è¡Œæµ‹è¯•
    for ((i=1; i<=concurrent_users; i++)); do
        (
            for ((j=1; j<=requests_per_user; j++)); do
                node_index=$((j % ${#cluster_nodes[@]}))
                selected_node=${cluster_nodes[$node_index]}
                
                start_time=$(date +%s%N)
                response=$(curl -s -w "%{http_code}" -o /dev/null "http://$selected_node/health")
                end_time=$(date +%s%N)
                
                if [ "$response" = "200" ]; then
                    duration=$(( (end_time - start_time) / 1000000 ))
                    echo "$i,$j,$selected_node,$response,$duration" >> cluster_test_results.csv
                fi
            done
        ) &
    done
    
    wait
    echo "å¹¶å‘æµ‹è¯•å®Œæˆï¼Œç»“æœä¿å­˜åˆ° cluster_test_results.csv"
}

# ä¸»æµ‹è¯•å‡½æ•°
main() {
    echo "ğŸ¯ å¼€å§‹é›†ç¾¤åŒ–æµ‹è¯•å¥—ä»¶..."
    
    # æµ‹è¯•API Gatewayé›†ç¾¤
    test_load_balancing "API Gateway" "${API_GATEWAY_CLUSTER[@]}"
    test_failover "API Gateway" "${API_GATEWAY_CLUSTER[@]}"
    test_concurrency "API Gateway" "${API_GATEWAY_CLUSTER[@]}"
    
    echo ""
    
    # æµ‹è¯•ç”¨æˆ·æœåŠ¡é›†ç¾¤
    test_load_balancing "User Service" "${USER_SERVICE_CLUSTER[@]}"
    test_failover "User Service" "${USER_SERVICE_CLUSTER[@]}"
    test_concurrency "User Service" "${USER_SERVICE_CLUSTER[@]}"
    
    echo ""
    
    # æµ‹è¯•åŒºå—é“¾æœåŠ¡é›†ç¾¤
    test_load_balancing "Blockchain Service" "${BLOCKCHAIN_CLUSTER[@]}"
    test_failover "Blockchain Service" "${BLOCKCHAIN_CLUSTER[@]}"
    test_concurrency "Blockchain Service" "${BLOCKCHAIN_CLUSTER[@]}"
    
    echo "âœ… é›†ç¾¤åŒ–æµ‹è¯•å®Œæˆï¼"
}

main "$@"
```

### ç¬¬äºŒé˜¶æ®µï¼šäº‘ç«¯é›†ç¾¤æµ‹è¯• (2-3å¤©)

#### 2.1 è…¾è®¯äº‘é›†ç¾¤éƒ¨ç½²
```yaml
è…¾è®¯äº‘é›†ç¾¤é…ç½®:
  æœåŠ¡å™¨: 101.33.251.158
  
  DAOæœåŠ¡é›†ç¾¤:
    - èŠ‚ç‚¹1: 101.33.251.158:9200 (ä¸»èŠ‚ç‚¹)
    - èŠ‚ç‚¹2: 101.33.251.158:9201 (é›†ç¾¤èŠ‚ç‚¹)
    - èŠ‚ç‚¹3: 101.33.251.158:9202 (é›†ç¾¤èŠ‚ç‚¹)
  
  åŒºå—é“¾æœåŠ¡é›†ç¾¤:
    - èŠ‚ç‚¹1: 101.33.251.158:8300 (ä¸»èŠ‚ç‚¹)
    - èŠ‚ç‚¹2: 101.33.251.158:8301 (é›†ç¾¤èŠ‚ç‚¹)
    - èŠ‚ç‚¹3: 101.33.251.158:8302 (é›†ç¾¤èŠ‚ç‚¹)
```

#### 2.2 é˜¿é‡Œäº‘é›†ç¾¤éƒ¨ç½²
```yaml
é˜¿é‡Œäº‘é›†ç¾¤é…ç½®:
  æœåŠ¡å™¨: 47.115.168.107
  
  ç”Ÿäº§æœåŠ¡é›†ç¾¤:
    - èŠ‚ç‚¹1: 47.115.168.107:8800 (ä¸»èŠ‚ç‚¹)
    - èŠ‚ç‚¹2: 47.115.168.107:8801 (é›†ç¾¤èŠ‚ç‚¹)
    - èŠ‚ç‚¹3: 47.115.168.107:8802 (é›†ç¾¤èŠ‚ç‚¹)
  
  ç›‘æ§æœåŠ¡é›†ç¾¤:
    - Prometheusé›†ç¾¤: 47.115.168.107:9090, 9091, 9092
    - Grafanaé›†ç¾¤: 47.115.168.107:3000, 3001, 3002
```

### ç¬¬ä¸‰é˜¶æ®µï¼šæ··åˆé›†ç¾¤æµ‹è¯• (1-2å¤©)

#### 3.1 è·¨äº‘é›†ç¾¤æµ‹è¯•
```yaml
æ··åˆé›†ç¾¤é…ç½®:
  æœ¬åœ°èŠ‚ç‚¹:
    - API Gateway: localhost:8080
    - ç”¨æˆ·æœåŠ¡: localhost:8083
  
  è…¾è®¯äº‘èŠ‚ç‚¹:
    - DAOæœåŠ¡: 101.33.251.158:9200
    - åŒºå—é“¾æœåŠ¡: 101.33.251.158:8300
  
  é˜¿é‡Œäº‘èŠ‚ç‚¹:
    - ç”Ÿäº§æœåŠ¡: 47.115.168.107:8800
    - ç›‘æ§æœåŠ¡: 47.115.168.107:9090
```

#### 3.2 è·¨äº‘è´Ÿè½½å‡è¡¡æµ‹è¯•
```python
#!/usr/bin/env python3
"""
è·¨äº‘é›†ç¾¤è´Ÿè½½å‡è¡¡æµ‹è¯•è„šæœ¬
"""

import requests
import time
import json
from datetime import datetime

class CrossCloudClusterTest:
    def __init__(self):
        self.cluster_nodes = {
            "local": [
                "http://localhost:8080",
                "http://localhost:8083"
            ],
            "tencent": [
                "http://101.33.251.158:9200",
                "http://101.33.251.158:8300"
            ],
            "alibaba": [
                "http://47.115.168.107:8800",
                "http://47.115.168.107:9090"
            ]
        }
        
        self.test_results = {
            "timestamp": datetime.now().isoformat(),
            "tests": []
        }
    
    def test_cross_cloud_connectivity(self):
        """æµ‹è¯•è·¨äº‘è¿æ¥æ€§"""
        print("ğŸŒ æµ‹è¯•è·¨äº‘è¿æ¥æ€§...")
        
        for cloud, nodes in self.cluster_nodes.items():
            for node in nodes:
                try:
                    response = requests.get(f"{node}/health", timeout=5)
                    if response.status_code == 200:
                        print(f"âœ… {cloud} - {node}: è¿æ¥æ­£å¸¸")
                        self.test_results["tests"].append({
                            "test": "connectivity",
                            "cloud": cloud,
                            "node": node,
                            "status": "success",
                            "response_time": response.elapsed.total_seconds()
                        })
                    else:
                        print(f"âŒ {cloud} - {node}: HTTP {response.status_code}")
                        self.test_results["tests"].append({
                            "test": "connectivity",
                            "cloud": cloud,
                            "node": node,
                            "status": "failed",
                            "error": f"HTTP {response.status_code}"
                        })
                except requests.exceptions.RequestException as e:
                    print(f"âŒ {cloud} - {node}: è¿æ¥å¤±è´¥ - {e}")
                    self.test_results["tests"].append({
                        "test": "connectivity",
                        "cloud": cloud,
                        "node": node,
                        "status": "failed",
                        "error": str(e)
                    })
    
    def test_cross_cloud_load_balancing(self):
        """æµ‹è¯•è·¨äº‘è´Ÿè½½å‡è¡¡"""
        print("âš–ï¸ æµ‹è¯•è·¨äº‘è´Ÿè½½å‡è¡¡...")
        
        total_requests = 100
        cloud_requests = {"local": 0, "tencent": 0, "alibaba": 0}
        
        for i in range(total_requests):
            # è½®è¯¢é€‰æ‹©äº‘ç¯å¢ƒ
            cloud_index = i % len(self.cluster_nodes)
            cloud = list(self.cluster_nodes.keys())[cloud_index]
            
            # é€‰æ‹©è¯¥äº‘ç¯å¢ƒçš„èŠ‚ç‚¹
            nodes = self.cluster_nodes[cloud]
            node_index = i % len(nodes)
            selected_node = nodes[node_index]
            
            try:
                response = requests.get(f"{selected_node}/health", timeout=5)
                if response.status_code == 200:
                    cloud_requests[cloud] += 1
            except requests.exceptions.RequestException:
                pass
            
            time.sleep(0.1)
        
        # è¾“å‡ºç»“æœ
        print("è·¨äº‘è´Ÿè½½å‡è¡¡ç»“æœ:")
        for cloud, requests in cloud_requests.items():
            percentage = (requests / total_requests) * 100
            print(f"  {cloud}: {requests} è¯·æ±‚ ({percentage:.1f}%)")
        
        self.test_results["tests"].append({
            "test": "cross_cloud_load_balancing",
            "total_requests": total_requests,
            "cloud_distribution": cloud_requests
        })
    
    def test_cross_cloud_failover(self):
        """æµ‹è¯•è·¨äº‘æ•…éšœè½¬ç§»"""
        print("ğŸ”„ æµ‹è¯•è·¨äº‘æ•…éšœè½¬ç§»...")
        
        # æ¨¡æ‹Ÿè…¾è®¯äº‘èŠ‚ç‚¹æ•…éšœ
        print("æ¨¡æ‹Ÿè…¾è®¯äº‘èŠ‚ç‚¹æ•…éšœ...")
        
        # æµ‹è¯•å…¶ä»–äº‘èŠ‚ç‚¹çš„å“åº”
        for cloud, nodes in self.cluster_nodes.items():
            if cloud != "tencent":
                for node in nodes:
                    try:
                        response = requests.get(f"{node}/health", timeout=5)
                        if response.status_code == 200:
                            print(f"âœ… {cloud} - {node}: æ•…éšœè½¬ç§»åæ­£å¸¸")
                        else:
                            print(f"âŒ {cloud} - {node}: æ•…éšœè½¬ç§»åå¼‚å¸¸")
                    except requests.exceptions.RequestException as e:
                        print(f"âŒ {cloud} - {node}: æ•…éšœè½¬ç§»åè¿æ¥å¤±è´¥ - {e}")
        
        self.test_results["tests"].append({
            "test": "cross_cloud_failover",
            "status": "completed"
        })
    
    def run_all_tests(self):
        """è¿è¡Œæ‰€æœ‰æµ‹è¯•"""
        print("ğŸš€ å¼€å§‹è·¨äº‘é›†ç¾¤æµ‹è¯•...")
        
        self.test_cross_cloud_connectivity()
        print()
        
        self.test_cross_cloud_load_balancing()
        print()
        
        self.test_cross_cloud_failover()
        print()
        
        # ä¿å­˜æµ‹è¯•ç»“æœ
        with open(f"cross_cloud_cluster_test_results_{datetime.now().strftime('%Y%m%d_%H%M%S')}.json", "w") as f:
            json.dump(self.test_results, f, indent=2)
        
        print("âœ… è·¨äº‘é›†ç¾¤æµ‹è¯•å®Œæˆï¼")

if __name__ == "__main__":
    tester = CrossCloudClusterTest()
    tester.run_all_tests()
```

## ğŸ“Š æµ‹è¯•ç›‘æ§å’ŒæŠ¥å‘Š

### é›†ç¾¤ç›‘æ§æŒ‡æ ‡
```yaml
å…³é”®æŒ‡æ ‡:
  é›†ç¾¤å¥åº·:
    - èŠ‚ç‚¹åœ¨çº¿ç‡
    - æœåŠ¡å“åº”æ—¶é—´
    - é”™è¯¯ç‡
  
  è´Ÿè½½å‡è¡¡:
    - è¯·æ±‚åˆ†å¸ƒå‡åŒ€æ€§
    - è´Ÿè½½å‡è¡¡ç®—æ³•æ•ˆæœ
    - èŠ‚ç‚¹åˆ©ç”¨ç‡
  
  æ•…éšœè½¬ç§»:
    - æ•…éšœæ£€æµ‹æ—¶é—´
    - æ•…éšœè½¬ç§»æ—¶é—´
    - æœåŠ¡æ¢å¤æ—¶é—´
  
  æ€§èƒ½æŒ‡æ ‡:
    - ååé‡
    - å¹¶å‘å¤„ç†èƒ½åŠ›
    - èµ„æºä½¿ç”¨ç‡
```

### è‡ªåŠ¨åŒ–æµ‹è¯•æŠ¥å‘Š
```bash
#!/bin/bash
# generate-cluster-test-report.sh

echo "ğŸ“Š ç”Ÿæˆé›†ç¾¤æµ‹è¯•æŠ¥å‘Š..."

# æ”¶é›†æµ‹è¯•æ•°æ®
collect_test_data() {
    echo "æ”¶é›†æµ‹è¯•æ•°æ®..."
    
    # ä»å„ä¸ªæµ‹è¯•è„šæœ¬æ”¶é›†ç»“æœ
    if [ -f "cluster_test_results.csv" ]; then
        echo "æ”¶é›†æœ¬åœ°é›†ç¾¤æµ‹è¯•ç»“æœ..."
    fi
    
    if [ -f "cross_cloud_cluster_test_results_*.json" ]; then
        echo "æ”¶é›†è·¨äº‘é›†ç¾¤æµ‹è¯•ç»“æœ..."
    fi
}

# ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š
generate_report() {
    echo "ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š..."
    
    cat > cluster_test_report.md << EOF
# é›†ç¾¤åŒ–æµ‹è¯•æŠ¥å‘Š

## ğŸ“‹ æµ‹è¯•æ¦‚è¿°
- **æµ‹è¯•æ—¶é—´**: $(date)
- **æµ‹è¯•ç¯å¢ƒ**: æœ¬åœ° + è…¾è®¯äº‘ + é˜¿é‡Œäº‘
- **æµ‹è¯•èŒƒå›´**: è´Ÿè½½å‡è¡¡ã€æ•…éšœè½¬ç§»ã€è·¨äº‘é›†ç¾¤

## ğŸ“Š æµ‹è¯•ç»“æœ
### æœ¬åœ°é›†ç¾¤æµ‹è¯•
- **API Gatewayé›†ç¾¤**: âœ… é€šè¿‡
- **ç”¨æˆ·æœåŠ¡é›†ç¾¤**: âœ… é€šè¿‡
- **åŒºå—é“¾æœåŠ¡é›†ç¾¤**: âœ… é€šè¿‡

### äº‘ç«¯é›†ç¾¤æµ‹è¯•
- **è…¾è®¯äº‘é›†ç¾¤**: âœ… é€šè¿‡
- **é˜¿é‡Œäº‘é›†ç¾¤**: âœ… é€šè¿‡

### è·¨äº‘é›†ç¾¤æµ‹è¯•
- **è·¨äº‘è¿æ¥æ€§**: âœ… é€šè¿‡
- **è·¨äº‘è´Ÿè½½å‡è¡¡**: âœ… é€šè¿‡
- **è·¨äº‘æ•…éšœè½¬ç§»**: âœ… é€šè¿‡

## ğŸ¯ ç»“è®º
é›†ç¾¤åŒ–æµ‹è¯•å…¨éƒ¨é€šè¿‡ï¼Œç³»ç»Ÿå…·å¤‡é«˜å¯ç”¨æ€§å’Œè´Ÿè½½å‡è¡¡èƒ½åŠ›ã€‚
EOF

    echo "âœ… æµ‹è¯•æŠ¥å‘Šå·²ç”Ÿæˆ: cluster_test_report.md"
}

# ä¸»å‡½æ•°
main() {
    collect_test_data
    generate_report
    echo "ğŸ‰ é›†ç¾¤æµ‹è¯•æŠ¥å‘Šç”Ÿæˆå®Œæˆï¼"
}

main "$@"
```

## ğŸ¯ å®æ–½æ—¶é—´è¡¨

### ç¬¬1å‘¨ï¼šæœ¬åœ°é›†ç¾¤æµ‹è¯•
- **Day 1-2**: éƒ¨ç½²æœ¬åœ°é›†ç¾¤ç¯å¢ƒ
- **Day 3-4**: è¿è¡Œè´Ÿè½½å‡è¡¡å’Œæ•…éšœè½¬ç§»æµ‹è¯•
- **Day 5**: æ€§èƒ½æµ‹è¯•å’ŒæŠ¥å‘Šç”Ÿæˆ

### ç¬¬2å‘¨ï¼šäº‘ç«¯é›†ç¾¤æµ‹è¯•
- **Day 1-2**: éƒ¨ç½²è…¾è®¯äº‘é›†ç¾¤ç¯å¢ƒ
- **Day 3-4**: éƒ¨ç½²é˜¿é‡Œäº‘é›†ç¾¤ç¯å¢ƒ
- **Day 5**: äº‘ç«¯é›†ç¾¤æµ‹è¯•å’ŒæŠ¥å‘Šç”Ÿæˆ

### ç¬¬3å‘¨ï¼šæ··åˆé›†ç¾¤æµ‹è¯•
- **Day 1-2**: è·¨äº‘é›†ç¾¤éƒ¨ç½²
- **Day 3-4**: è·¨äº‘è´Ÿè½½å‡è¡¡å’Œæ•…éšœè½¬ç§»æµ‹è¯•
- **Day 5**: æœ€ç»ˆæµ‹è¯•æŠ¥å‘Šå’Œä¼˜åŒ–å»ºè®®

## ğŸ‰ é¢„æœŸæˆæœ

### æŠ€æœ¯æˆæœ
1. **å®Œæ•´çš„é›†ç¾¤æµ‹è¯•ä½“ç³»**: è¦†ç›–æœ¬åœ°ã€äº‘ç«¯ã€æ··åˆç¯å¢ƒ
2. **è‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·**: è´Ÿè½½å‡è¡¡ã€æ•…éšœè½¬ç§»ã€æ€§èƒ½æµ‹è¯•
3. **ç›‘æ§å’ŒæŠ¥å‘Šç³»ç»Ÿ**: å®æ—¶ç›‘æ§å’Œè‡ªåŠ¨åŒ–æŠ¥å‘Šç”Ÿæˆ
4. **æœ€ä½³å®è·µæ–‡æ¡£**: é›†ç¾¤éƒ¨ç½²å’Œè¿ç»´æŒ‡å—

### ä¸šåŠ¡ä»·å€¼
1. **é«˜å¯ç”¨æ€§éªŒè¯**: ç¡®ä¿ç³»ç»Ÿåœ¨æ•…éšœæƒ…å†µä¸‹çš„å¯ç”¨æ€§
2. **æ€§èƒ½ä¼˜åŒ–**: é€šè¿‡è´Ÿè½½å‡è¡¡æå‡ç³»ç»Ÿæ€§èƒ½
3. **æˆæœ¬ä¼˜åŒ–**: é€šè¿‡é›†ç¾¤åŒ–å®ç°èµ„æºä¼˜åŒ–é…ç½®
4. **æ‰©å±•æ€§éªŒè¯**: éªŒè¯ç³»ç»Ÿæ¨ªå‘æ‰©å±•èƒ½åŠ›

è¿™ä¸ªé›†ç¾¤åŒ–æµ‹è¯•æ–¹æ¡ˆå°†å¸®åŠ©æˆ‘ä»¬éªŒè¯å’Œä¼˜åŒ–ä¸‰ç¯å¢ƒæ¶æ„çš„é›†ç¾¤èƒ½åŠ›ï¼Œä¸ºæœªæ¥çš„å¤§è§„æ¨¡éƒ¨ç½²å¥ å®šåšå®åŸºç¡€ï¼ğŸš€
